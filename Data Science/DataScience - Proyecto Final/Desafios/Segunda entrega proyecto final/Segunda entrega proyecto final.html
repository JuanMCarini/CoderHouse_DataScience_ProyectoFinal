<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Análisis socioeducativo de los habitantes de la Ciudad de Buenos Aires</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Segunda entrega proyecto final_files/libs/clipboard/clipboard.min.js"></script>
<script src="Segunda entrega proyecto final_files/libs/quarto-html/quarto.js"></script>
<script src="Segunda entrega proyecto final_files/libs/quarto-html/popper.min.js"></script>
<script src="Segunda entrega proyecto final_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Segunda entrega proyecto final_files/libs/quarto-html/anchor.min.js"></script>
<link href="Segunda entrega proyecto final_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Segunda entrega proyecto final_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="Segunda entrega proyecto final_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="Segunda entrega proyecto final_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Segunda entrega proyecto final_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Segunda entrega proyecto final_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="Segunda entrega proyecto final_files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<style>html{ scroll-behavior: smooth; }</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#presentación-del-problema-y-fuente-de-información" id="toc-presentación-del-problema-y-fuente-de-información" class="nav-link active" data-scroll-target="#presentación-del-problema-y-fuente-de-información"> <span class="header-section-number">1</span> Presentación del problema y fuente de información</a></li>
  <li><a href="#preguntas-y-objetivos-de-la-investigación" id="toc-preguntas-y-objetivos-de-la-investigación" class="nav-link" data-scroll-target="#preguntas-y-objetivos-de-la-investigación"> <span class="header-section-number">2</span> Preguntas y objetivos de la investigación</a></li>
  <li><a href="#orden-de-trabajo" id="toc-orden-de-trabajo" class="nav-link" data-scroll-target="#orden-de-trabajo"> <span class="header-section-number">3</span> Orden de trabajo</a></li>
  <li><a href="#introducción-a-las-variables-análisis-exploratorio-de-los-datos" id="toc-introducción-a-las-variables-análisis-exploratorio-de-los-datos" class="nav-link" data-scroll-target="#introducción-a-las-variables-análisis-exploratorio-de-los-datos"> <span class="header-section-number">4</span> Introducción a las variables: Análisis exploratorio de los datos</a>
  <ul class="collapse">
  <li><a href="#análisis-univariado" id="toc-análisis-univariado" class="nav-link" data-scroll-target="#análisis-univariado"> <span class="header-section-number">4.1</span> Análisis univariado</a>
  <ul class="collapse">
  <li><a href="#género-y-edad" id="toc-género-y-edad" class="nav-link" data-scroll-target="#género-y-edad"> <span class="header-section-number">4.1.1</span> Género y edad</a></li>
  <li><a href="#comuna" id="toc-comuna" class="nav-link" data-scroll-target="#comuna"> <span class="header-section-number">4.1.2</span> Comuna</a></li>
  <li><a href="#ingreso-familiar-per-capita" id="toc-ingreso-familiar-per-capita" class="nav-link" data-scroll-target="#ingreso-familiar-per-capita"> <span class="header-section-number">4.1.3</span> Ingreso familiar per capita</a></li>
  <li><a href="#años-de-escolaridad" id="toc-años-de-escolaridad" class="nav-link" data-scroll-target="#años-de-escolaridad"> <span class="header-section-number">4.1.4</span> Años de escolaridad</a></li>
  <li><a href="#máximo-nivel-educativo-target" id="toc-máximo-nivel-educativo-target" class="nav-link" data-scroll-target="#máximo-nivel-educativo-target"> <span class="header-section-number">4.1.5</span> Máximo nivel educativo (Target)</a></li>
  </ul></li>
  <li><a href="#análisis-bivariado" id="toc-análisis-bivariado" class="nav-link" data-scroll-target="#análisis-bivariado"> <span class="header-section-number">4.2</span> Análisis bivariado</a>
  <ul class="collapse">
  <li><a href="#comparación-entre-variables-numéricas" id="toc-comparación-entre-variables-numéricas" class="nav-link" data-scroll-target="#comparación-entre-variables-numéricas"> <span class="header-section-number">4.2.1</span> Comparación entre variables numéricas</a></li>
  <li><a href="#comparación-de-variables-categóricas-con-numéricas" id="toc-comparación-de-variables-categóricas-con-numéricas" class="nav-link" data-scroll-target="#comparación-de-variables-categóricas-con-numéricas"> <span class="header-section-number">4.2.2</span> Comparación de variables categóricas con numéricas</a></li>
  <li><a href="#variable-numéricas-con-comuna" id="toc-variable-numéricas-con-comuna" class="nav-link" data-scroll-target="#variable-numéricas-con-comuna"> <span class="header-section-number">4.2.3</span> Variable numéricas con comuna</a></li>
  </ul></li>
  <li><a href="#análisis-multivariado" id="toc-análisis-multivariado" class="nav-link" data-scroll-target="#análisis-multivariado"> <span class="header-section-number">4.3</span> Análisis multivariado</a></li>
  </ul></li>
  <li><a href="#modelos-analíticos" id="toc-modelos-analíticos" class="nav-link" data-scroll-target="#modelos-analíticos"> <span class="header-section-number">5</span> Modelos analíticos</a>
  <ul class="collapse">
  <li><a href="#tratado-de-nulos" id="toc-tratado-de-nulos" class="nav-link" data-scroll-target="#tratado-de-nulos"> <span class="header-section-number">5.1</span> Tratado de nulos</a>
  <ul class="collapse">
  <li><a href="#variable-remplazadas-con-moda" id="toc-variable-remplazadas-con-moda" class="nav-link" data-scroll-target="#variable-remplazadas-con-moda"> <span class="header-section-number">5.1.1</span> Variable remplazadas con moda</a></li>
  </ul></li>
  <li><a href="#target" id="toc-target" class="nav-link" data-scroll-target="#target"> <span class="header-section-number">5.2</span> Target</a>
  <ul class="collapse">
  <li><a href="#borrado-de-variables" id="toc-borrado-de-variables" class="nav-link" data-scroll-target="#borrado-de-variables"> <span class="header-section-number">5.2.1</span> Borrado de variables</a></li>
  </ul></li>
  <li><a href="#división-de-train-y-test" id="toc-división-de-train-y-test" class="nav-link" data-scroll-target="#división-de-train-y-test"> <span class="header-section-number">5.3</span> División de train y test</a>
  <ul class="collapse">
  <li><a href="#train" id="toc-train" class="nav-link" data-scroll-target="#train"> <span class="header-section-number">5.3.1</span> Train</a></li>
  <li><a href="#test" id="toc-test" class="nav-link" data-scroll-target="#test"> <span class="header-section-number">5.3.2</span> Test</a></li>
  </ul></li>
  <li><a href="#árbol-de-decisión" id="toc-árbol-de-decisión" class="nav-link" data-scroll-target="#árbol-de-decisión"> <span class="header-section-number">5.4</span> Árbol de decisión</a>
  <ul class="collapse">
  <li><a href="#prueba" id="toc-prueba" class="nav-link" data-scroll-target="#prueba"> <span class="header-section-number">5.4.1</span> Prueba</a></li>
  <li><a href="#acuracy" id="toc-acuracy" class="nav-link" data-scroll-target="#acuracy"> <span class="header-section-number">5.4.2</span> Acuracy</a></li>
  <li><a href="#gráficos" id="toc-gráficos" class="nav-link" data-scroll-target="#gráficos"> <span class="header-section-number">5.4.3</span> Gráficos</a></li>
  <li><a href="#confusion-matrix" id="toc-confusion-matrix" class="nav-link" data-scroll-target="#confusion-matrix"> <span class="header-section-number">5.4.4</span> Confusion matrix</a></li>
  <li><a href="#visualización-del-arbol" id="toc-visualización-del-arbol" class="nav-link" data-scroll-target="#visualización-del-arbol"> <span class="header-section-number">5.4.5</span> Visualización del arbol</a></li>
  </ul></li>
  <li><a href="#random-forest" id="toc-random-forest" class="nav-link" data-scroll-target="#random-forest"> <span class="header-section-number">5.5</span> Random Forest</a>
  <ul class="collapse">
  <li><a href="#comienzo-de-entrenamiento" id="toc-comienzo-de-entrenamiento" class="nav-link" data-scroll-target="#comienzo-de-entrenamiento"> <span class="header-section-number">5.5.1</span> Comienzo de entrenamiento</a></li>
  </ul></li>
  <li><a href="#prediccion" id="toc-prediccion" class="nav-link" data-scroll-target="#prediccion"> <span class="header-section-number">5.6</span> Prediccion</a></li>
  <li><a href="#metricas" id="toc-metricas" class="nav-link" data-scroll-target="#metricas"> <span class="header-section-number">5.7</span> Metricas</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Análisis socioeducativo de los habitantes de la Ciudad de Buenos Aires</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p><strong>Conformación del equipo</strong></p>
<ul>
<li>Lucía Hukovsky</li>
<li>Juan Martín Carini</li>
<li>Lucía Buzzeo</li>
<li>José Saint Germain</li>
</ul>
<section id="presentación-del-problema-y-fuente-de-información" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Presentación del problema y fuente de información</h1>
<blockquote class="blockquote">
<h2 id="presentación-del-problema" data-number="1.1" class="anchored" data-anchor-id="presentación-del-problema-y-fuente-de-información"><span class="header-section-number">1.1</span> Presentación del problema</h2>
</blockquote>
<p>Nos es de gran de interés vivir en una comunidad con políticas públicas eficaces que mejoren las condiciones de vida de las personas. En este sentido, hemos decidido analizar los diferentes ejes que en nuestro país se rigen por políticas publicas. Al respecto, encontramos una gran limitación en el eje de educación al reconocer que su acceso dista de ser equitativo. Este aspecto no nos resultó una novedad, sin embargo, nos dio el pie para comenzar una investigación que permita dar una explicación teórica a la problemática. En concreto, nos ha permitido conocer mejor la situación educativa actual de CABA y descubrir las principales variables que afectan el nivel educativo.</p>
<p>El análisis realizado en el marco del presente proyecto podría establecer una base de requerimientos que permitan generar políticas públicas efectivas, no solo en el ámbito educativo, sino en el económico, cultural, social y geográfico, entre otros.</p>
<blockquote class="blockquote">
<h2 id="definición-de-la-fuente-de-información" data-number="1.2" class="anchored"><span class="header-section-number">1.2</span> Definición de la fuente de información</h2>
</blockquote>
<p>Para trabajar esta problemática, hemos decidido recurrir a la <a href="https://www.estadisticaciudad.gob.ar/eyc/?page_id=702">Encuesta Anual de Hogares</a> del Gobierno de la Ciudad de Buenos Aires para el año 2019. El mismo está disponible en la base de <a href="https://data.buenosaires.gob.ar/dataset/encuesta-anual-hogares/resource/3a45c563-396d-42de-ba93-8a93729e0723">datos abiertos</a> del GCBA.</p>
<p>Esta encuesta contiene información demográfica, social, económica, educativa y de salud de 14319 habitantes de la Ciudad, la cual es una muestra representativa que permite obtener un vistazo de la población de la Ciudad.</p>
</section>
<section id="preguntas-y-objetivos-de-la-investigación" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Preguntas y objetivos de la investigación</h1>
<p>Nuestro objetivo principal ha sido descubrir las principales variables intervinientes en el nivel máximo educativo alcanzado por la población de la Ciudad Autónoma de Buenos Aires (CABA).</p>
<p>De este objetivo principal se desprenden los siguientes objetivos especificos:</p>
<ul>
<li>Determinar si la ubicación geográfica del encuestado es determinante para alcanzar ciertos niveles educativos. De este objetivo se desprende determinar la relación entre el nivel educativo y la comuna del encuestado, así como la relación entre la misma variable y el hecho de que el encuestado habite en una villa de emergencia.</li>
<li>Establecer la fuerza con la que el nivel socioeconómico afecta la variable target.</li>
<li>Explorar la relación del target con otras variables, como el sexo del encuestado, la cantidad de hijos, la afiliación de salud o la edad.</li>
</ul>
</section>
<section id="orden-de-trabajo" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Orden de trabajo</h1>
<p>Este trabajo se ha dividido en 3 partes:</p>
<ol type="1">
<li>Introducción a las variables del problema: Se ha realizado un analisis de las variables en donde se ha buscado conocer su performance dentro del datset y su potencial significancia para la pregunta que buscamos responder. A la vez, hemos investigado cómo las variables interactúan entre si. Esta parte es lo que se conoce como análisis univariado, bivariado y multivariado</li>
<li>Modelos análiticos: En esta sección se han llevado a cabo diversos modelos análiticos y algoritmos que han servido para acercarnos a la respuesta la pregunta que dio inicio a la presente investigación. Como nuestra variable objetivo es categórica vamos a realizar diversos modelos de clasificación.</li>
<li>Conclusión: Se han alcanzado conclusiones finales sobre los hallazgos. Además, se han discutido posibles limitaciones y se han planteado futuras líneas de análisis a partir del análisis presente.</li>
</ol>
</section>
<section id="introducción-a-las-variables-análisis-exploratorio-de-los-datos" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Introducción a las variables: Análisis exploratorio de los datos</h1>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:360,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828656215,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="454">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Cargamos las librerías</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Lo primero que vamos a hacer es importar la base de datos y tener un vistazo general de las primeras filas del dataset.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:762,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828657495,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="bbbfa55e-e59b-4081-b164-45fb8550a8f5" data-execution_count="455">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Cargamos el dataset con el que vamos a trabajar y le damos un vistazo</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"https://github.com/LHukovsky/Coderhouse-Final-Project-/raw/main/encuesta-anual-hogares-2019.csv"</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                 encoding<span class="op">=</span><span class="st">"latin1"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="455">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>id</th>
      <th>nhogar</th>
      <th>miembro</th>
      <th>comuna</th>
      <th>dominio</th>
      <th>edad</th>
      <th>sexo</th>
      <th>parentesco_jefe</th>
      <th>situacion_conyugal</th>
      <th>num_miembro_padre</th>
      <th>...</th>
      <th>ingreso_per_capita_familiar</th>
      <th>estado_educativo</th>
      <th>sector_educativo</th>
      <th>nivel_actual</th>
      <th>nivel_max_educativo</th>
      <th>años_escolaridad</th>
      <th>lugar_nacimiento</th>
      <th>afiliacion_salud</th>
      <th>hijos_nacidos_vivos</th>
      <th>cantidad_hijos_nac_vivos</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>Resto de la Ciudad</td>
      <td>18</td>
      <td>Mujer</td>
      <td>Jefe</td>
      <td>Soltero/a</td>
      <td>Padre no vive en el hogar</td>
      <td>...</td>
      <td>9000</td>
      <td>Asiste</td>
      <td>Estatal/publico</td>
      <td>Universitario</td>
      <td>Otras escuelas especiales</td>
      <td>12</td>
      <td>PBA excepto GBA</td>
      <td>Solo obra social</td>
      <td>No</td>
      <td>No corresponde</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>5</td>
      <td>Resto de la Ciudad</td>
      <td>18</td>
      <td>Mujer</td>
      <td>Otro no familiar</td>
      <td>Soltero/a</td>
      <td>Padre no vive en el hogar</td>
      <td>...</td>
      <td>9000</td>
      <td>Asiste</td>
      <td>Estatal/publico</td>
      <td>Universitario</td>
      <td>Otras escuelas especiales</td>
      <td>12</td>
      <td>Otra provincia</td>
      <td>Solo plan de medicina prepaga por contratación...</td>
      <td>No</td>
      <td>No corresponde</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>Resto de la Ciudad</td>
      <td>18</td>
      <td>Varon</td>
      <td>Jefe</td>
      <td>Soltero/a</td>
      <td>Padre no vive en el hogar</td>
      <td>...</td>
      <td>33333</td>
      <td>Asiste</td>
      <td>Privado religioso</td>
      <td>Universitario</td>
      <td>Otras escuelas especiales</td>
      <td>12</td>
      <td>CABA</td>
      <td>Solo plan de medicina prepaga por contratación...</td>
      <td>NaN</td>
      <td>No corresponde</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2</td>
      <td>1</td>
      <td>2</td>
      <td>2</td>
      <td>Resto de la Ciudad</td>
      <td>50</td>
      <td>Mujer</td>
      <td>Padre/Madre/Suegro/a</td>
      <td>Viudo/a</td>
      <td>No corresponde</td>
      <td>...</td>
      <td>33333</td>
      <td>No asiste pero asistió</td>
      <td>No corresponde</td>
      <td>No corresponde</td>
      <td>Secundario/medio comun</td>
      <td>17</td>
      <td>CABA</td>
      <td>Solo prepaga o mutual via OS</td>
      <td>Si</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>2</td>
      <td>Resto de la Ciudad</td>
      <td>17</td>
      <td>Varon</td>
      <td>Otro familiar</td>
      <td>Soltero/a</td>
      <td>Padre no vive en el hogar</td>
      <td>...</td>
      <td>33333</td>
      <td>Asiste</td>
      <td>Privado religioso</td>
      <td>Secundario/medio comun</td>
      <td>EGB (1° a 9° año)</td>
      <td>10</td>
      <td>CABA</td>
      <td>Solo plan de medicina prepaga por contratación...</td>
      <td>NaN</td>
      <td>No corresponde</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 31 columns</p>
</div>
</div>
</div>
<p>Posteriormente vemos sus variables, el tipo que son (numéricas o de texto) y la cantidad de nulls que poseen.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:9,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828657496,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="a8656b96-1adc-434c-ee65-dc85d1981b3f" data-execution_count="456">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Miramos sus variable, el tipo que son y si tienen nulls</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 14319 entries, 0 to 14318
Data columns (total 31 columns):
 #   Column                       Non-Null Count  Dtype 
---  ------                       --------------  ----- 
 0   id                           14319 non-null  int64 
 1   nhogar                       14319 non-null  int64 
 2   miembro                      14319 non-null  int64 
 3   comuna                       14319 non-null  int64 
 4   dominio                      14319 non-null  object
 5   edad                         14319 non-null  int64 
 6   sexo                         14319 non-null  object
 7   parentesco_jefe              14319 non-null  object
 8   situacion_conyugal           14318 non-null  object
 9   num_miembro_padre            14319 non-null  object
 10  num_miembro_madre            14319 non-null  object
 11  estado_ocupacional           14319 non-null  object
 12  cat_ocupacional              14319 non-null  object
 13  calidad_ingresos_lab         14319 non-null  object
 14  ingreso_total_lab            14319 non-null  int64 
 15  calidad_ingresos_no_lab      14319 non-null  object
 16  ingreso_total_no_lab         14319 non-null  int64 
 17  calidad_ingresos_totales     14319 non-null  object
 18  ingresos_totales             14319 non-null  int64 
 19  calidad_ingresos_familiares  14319 non-null  object
 20  ingresos_familiares          14319 non-null  int64 
 21  ingreso_per_capita_familiar  14319 non-null  int64 
 22  estado_educativo             14319 non-null  object
 23  sector_educativo             14316 non-null  object
 24  nivel_actual                 14319 non-null  object
 25  nivel_max_educativo          13265 non-null  object
 26  años_escolaridad             14257 non-null  object
 27  lugar_nacimiento             14318 non-null  object
 28  afiliacion_salud             14315 non-null  object
 29  hijos_nacidos_vivos          6535 non-null   object
 30  cantidad_hijos_nac_vivos     14319 non-null  object
dtypes: int64(10), object(21)
memory usage: 3.4+ MB</code></pre>
</div>
</div>
<p>Generamos diversas transformaciones de variables, así como la creación de la variale “Target”, pues es la que usaremos para todo el análisis:</p>
<ul>
<li>Creamos la variable “Target” y le asignamos la varibale “nivel_max_educativo”.</li>
<li>En la variable “Target”, reducimos su dimensionalidad intercambiando los valores:
<ul>
<li>“Secundario/medio comun” y “EGB (1° a 9° año)” por “sec_completo”,</li>
<li>“Primario especial” y “Primario comun” por “prim_completo”</li>
<li>“Sala de 5” por “incial”,</li>
<li>“Otras escuelas especiales” por “superior”,</li>
<li>y por último a “No corresponde” por nulos.</li>
</ul></li>
<li>Remplazamos los valores de años_escolaridad para que todos sean numéricos.</li>
<li>En la variable “cantidad_hijos_nac_vivos” cambiamos el valor “no corresponde” como nulo, para luego cambiar el tipo de variable a entero.</li>
<li>Las variables “comuna”, “id”, “nhogar” y “miembro” son de tipo numérico, pero deberían ser categóricas, por lo tanto transformamos su tipo a string.</li>
<li>Por último renombramos algunas variables para que sean más cortas:
<ul>
<li>“dominio_Villas de emergencia” por “dominio_villas”,</li>
<li>“ingreso_per_capita_familiar” por “ing_per_cap_familiar”,</li>
<li>“cantidad_hijos_nac_vivos” por “cant_hijos_nac_vivos”.</li>
</ul></li>
</ul>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:613,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828658105,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="457">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Creamos el target para nivel_max_educativo, reduciendo su dimensionalidad</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Target'</span>] <span class="op">=</span> df[<span class="st">'nivel_max_educativo'</span>]</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'Target'</span>].isin([<span class="st">'Secundario/medio comun'</span>,<span class="st">'EGB (1° a 9° año)'</span>]),<span class="st">'Target'</span>] <span class="op">=</span> <span class="st">'sec_completo'</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'Target'</span>].isin([<span class="st">'Primario especial'</span>,<span class="st">'Primario comun'</span>]),<span class="st">'Target'</span>]         <span class="op">=</span> <span class="st">'prim_completo'</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'Target'</span>]    <span class="op">==</span> <span class="st">'Sala de 5'</span>,<span class="st">'Target'</span>]                                    <span class="op">=</span> <span class="st">'inicial'</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'Target'</span>]    <span class="op">==</span> <span class="st">'Otras escuelas especiales'</span>,<span class="st">'Target'</span>]                    <span class="op">=</span> <span class="st">'superior'</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'Target'</span>].isin([<span class="st">'No corresponde'</span>,np.nan]),<span class="st">'Target'</span>]                       <span class="op">=</span> np.nan</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Remplazamos los valores de años_escolaridad para que todos sean numéricos</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>df.loc[df.años_escolaridad<span class="op">==</span><span class="st">"Ningun año de escolaridad aprobado"</span>,<span class="st">"años_escolaridad"</span>]<span class="op">=</span><span class="dv">0</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"años_escolaridad"</span>] <span class="op">=</span> df[<span class="st">"años_escolaridad"</span>].astype(<span class="st">'float'</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co">#La variable "cantidad_hijos_nac_vivos" se puede pasar a numérica si se toma "no corresponde" como NAN.</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>df.loc[df.cantidad_hijos_nac_vivos<span class="op">==</span><span class="st">"No corresponde"</span>,<span class="st">"cantidad_hijos_nac_vivos"</span>]<span class="op">=</span><span class="st">"0"</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"cantidad_hijos_nac_vivos"</span>] <span class="op">=</span> df[<span class="st">"cantidad_hijos_nac_vivos"</span>].<span class="bu">apply</span>(<span class="bu">int</span>)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="co">#Hay determinadas variables (comuna,id,nhogar y miembro) que están como numéricas pero deberían ser categóricas.</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"comuna"</span>,<span class="st">"id"</span>,<span class="st">"nhogar"</span>,<span class="st">"miembro"</span>]] <span class="op">=</span> df[[<span class="st">"comuna"</span>,<span class="st">"id"</span>,<span class="st">"nhogar"</span>,<span class="st">"miembro"</span>]].applymap(<span class="bu">str</span>)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Por último renombramos algunas variables para que sean más cortas</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>df.rename(columns <span class="op">=</span> {<span class="st">'dominio_Villas de emergencia'</span>: <span class="st">'dominio_villas'</span>, </span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>                     <span class="st">'ingreso_per_capita_familiar'</span>: <span class="st">'ing_per_cap_familiar'</span>,</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"cantidad_hijos_nac_vivos"</span> : <span class="st">"cant_hijos_nac_vivos"</span>}, inplace <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Armamos un diccionario con las variables y etiquetas, esto nos va a servir para generar títulos en los gráficos:</p>
<ul>
<li>“id” : “Clave que identifica la vivienda”,</li>
<li>“nhogar” : “La variable id + nhogar = clave que identifica a cada hogar”,</li>
<li>“miembro” : “Variables id + nhogar + miembro = clave que identifica a cada persona”,</li>
<li>“comuna” : “Comuna donde reside la persona encuestada”,</li>
<li>“edad” : “Edad de la persona encuestada”,</li>
<li>“sexo” : “Sexo de la persona encuestada”,</li>
<li>“parentesco_jefe” : “Parentesco entre la persona encuestada y el jefe de hogar”,</li>
<li>“situacion_conyugal” : “Situación conyugal de la persona encuestada”,</li>
<li>“num_miembro_padre” : “Número de miembro que corresponde al padre”,</li>
<li>“num_miembro_madre” : “Número de miembro que corresponde a la madre”,</li>
<li>“estado_ocupacional” : “Situación ocupacional de la persona encuestada”,</li>
<li>“cat_ocupacional” : “Categoría ocupacional de la persona encuestada”,</li>
<li>“calidad_ingresos_lab” : “Calidad de la declaración de ingresos laborales totales”,</li>
<li>“ingreso_total_lab” : “Ingreso total laboral percibido el mes anterior”,</li>
<li>“calidad_ingresos_no_lab” : “Calidad de la declaración de ingresos no laborales totales”,</li>
<li>“ingreso_total_no_lab” : “Ingreso total no laboral percibido el mes anterior”,</li>
<li>“calidad_ingresos_totales” : “Calidad de ingresos totales individuales”,</li>
<li>“ingresos_totales” : “Ingreso total individual percibido el mes anterior”,</li>
<li>“calidad_ingresos_familiares” : “Calidad de ingresos totales familiares”,</li>
<li>“ingresos_familiares” : “Ingresos totales familiares percibido el mes anterior”,</li>
<li>“ing_per_cap_familiar” : “Ingreso familiar per capita percibido el mes anterior”,</li>
<li>“estado_educativo” : “Asistencia (pasada o presente) o no a algún establecimiento educativo”,</li>
<li>“sector_educativo” : “Sector al que pertenece el establecimiento educativo al que asiste”,</li>
<li>“nivel_actual” : “Nivel cursado al momento de la encuesta”,</li>
<li>“nivel_max_educativo” : “Máximo nivel educativo que se cursó”,</li>
<li>“años_escolaridad” : “Años de escolaridad alcanzados”,</li>
<li>“lugar_nacimiento” : “Lugar de nacimiento de la persona encuestada”,</li>
<li>“afiliacion_salud” : “Afiliación de salud de la persona encuestada”,</li>
<li>“hijos_nacidos_vivos” : “Tiene o tuvo hijos nacidos vivos”,</li>
<li>“cant_hijos_nac_vivos’ :”Cantidad de hijos nacidos vivos”,</li>
<li>“dominio” : “¿la vivienda se ubica en una villa de emergencia?”,</li>
<li>“Target” : “Nivel máximo educativo”.</li>
</ul>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:5,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828658105,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="458">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Armamos un diccionario con las variables y etiquetas, esto nos va a servir para generar títulos en los gráficos</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>etiquetas <span class="op">=</span> {</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'id'</span>                          : <span class="st">'Clave que identifica la vivienda'</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'nhogar'</span>                      : <span class="st">'La variable id + nhogar = clave que identifica a cada hogar'</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'miembro'</span>                     : <span class="st">'Variables id + nhogar + miembro = clave que identifica a cada persona'</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'comuna'</span>                      : <span class="st">'Comuna donde reside la persona encuestada'</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'edad'</span>                        : <span class="st">'Edad de la persona encuestada'</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'sexo'</span>                        : <span class="st">'Sexo de la persona encuestada'</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'parentesco_jefe'</span>             : <span class="st">'Parentesco entre la persona encuestada y el jefe de hogar'</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'situacion_conyugal'</span>          : <span class="st">'Situación conyugal de la persona encuestada'</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'num_miembro_padre'</span>           : <span class="st">'Número de miembro que corresponde al padre'</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'num_miembro_madre'</span>           : <span class="st">'Número de miembro que corresponde a la madre'</span>,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'estado_ocupacional'</span>          : <span class="st">'Situación ocupacional de la persona encuestada'</span>,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'cat_ocupacional'</span>             : <span class="st">'Categoría ocupacional de la persona encuestada'</span>,</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'calidad_ingresos_lab'</span>        : <span class="st">'Calidad de la declaración de ingresos laborales totales'</span>,</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'ingreso_total_lab'</span>           : <span class="st">'Ingreso total laboral percibido el mes anterior'</span>, </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">'calidad_ingresos_no_lab'</span>     : <span class="st">'Calidad de la declaración de ingresos no laborales totales'</span>, </span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">'ingreso_total_no_lab'</span>        : <span class="st">'Ingreso total no laboral percibido el mes anterior'</span>,</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">'calidad_ingresos_totales'</span>    : <span class="st">'Calidad de ingresos totales individuales'</span>, </span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">'ingresos_totales'</span>            : <span class="st">'Ingreso total individual percibido el mes anterior'</span>,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">'calidad_ingresos_familiares'</span> : <span class="st">'Calidad de ingresos totales familiares'</span>,</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">'ingresos_familiares'</span>         : <span class="st">'Ingresos totales familiares percibido el mes anterior'</span>,</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">'ing_per_cap_familiar'</span>        : <span class="st">'Ingreso familiar per capita percibido el mes anterior'</span>, </span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">'estado_educativo'</span>            : <span class="st">'Asistencia (pasada o presente) o no a algún establecimiento educativo'</span>, </span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">'sector_educativo'</span>            : <span class="st">'Sector al que pertenece el establecimiento educativo al que asiste'</span>,</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">'nivel_actual'</span>                : <span class="st">'Nivel cursado al momento de la encuesta'</span>,</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">'nivel_max_educativo'</span>         : <span class="st">'Máximo nivel educativo que se cursó'</span>,</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">'años_escolaridad'</span>            : <span class="st">'Años de escolaridad alcanzados'</span>,</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">'lugar_nacimiento'</span>            : <span class="st">'Lugar de nacimiento de la persona encuestada'</span>,</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">'afiliacion_salud'</span>            : <span class="st">'Afiliación de salud de la persona encuestada'</span>,</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">'hijos_nacidos_vivos'</span>         : <span class="st">'Tiene o tuvo hijos nacidos vivos'</span>,</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">'cant_hijos_nac_vivos'</span>        : <span class="st">'Cantidad de hijos nacidos vivos'</span>,</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">'dominio'</span>                     : <span class="st">'¿la vivienda se ubica en una villa de emergencia?'</span>,</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Target'</span>                      : <span class="st">'Nivel máximo educativo'</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>    }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Comenzamos analizando el dataset en su conjunto, comenzando por la cantidad de filas y columnas que posee:</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:4,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828658105,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="c9b563d4-ade4-4781-8290-4c3f431c5530" data-execution_count="459">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'</span><span class="ch">\t</span><span class="ss">El dataset tiene </span><span class="sc">{</span>df<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> filas y </span><span class="sc">{</span>df<span class="sc">.</span>shape[<span class="dv">1</span>]<span class="sc">}</span><span class="ss"> columnas. </span><span class="ch">\n</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    El dataset tiene 14319 filas y 32 columnas. 
</code></pre>
</div>
</div>
<p>Para observar los nulos de una manera diferente, vamos a graficar los mismos para tener un pantallazo de los mismos.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:4829,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828662933,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="d6b46792-a290-40d9-a8aa-7f50f21e117c" data-execution_count="460">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> missingno <span class="im">as</span> msno</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>msno.bar(df)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-8-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>De este gráfico podemos saber a simple vista que las variables “nivel_max_educativo” (y nuestra copia, “Target”) e “hijos_nacidos_vivos” tienen la mayor cantidad de valores nulos.</p>
<p>Ahora vamos a construir una tabla resumen con varias estadísticas descriptivas para cada una de las variables, así como con una breve descripción de lo que significa cada una de ellas.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:747,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828663676,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="1db7b4ea-ead1-47df-f2fc-98b95ab676cc" data-execution_count="461">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tomamos el código visto en clase para tener un vistazo de las diversas medidas estadísticas de cada variale</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.api.types <span class="im">import</span> is_numeric_dtype</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> univariado_info(df):</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">'''Calculo de informacion estadistias y genericas de cada columna de un dataframe'''</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Creamos un dataframe con columnas especificas:</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  df_info <span class="op">=</span> pd.DataFrame(columns<span class="op">=</span>[<span class="st">'Cantidad'</span>, <span class="st">'Tipo'</span> , <span class="st">'Missing'</span>, <span class="st">'Unicos'</span>, <span class="st">'Numeric'</span>])</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#loop de todas las variables del dataframe</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> col <span class="kw">in</span> df:</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>      <span class="co">#obtengo info de la columna</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>      data_series <span class="op">=</span> df[col]</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>      <span class="co">#lleno dataframe con las columnas iniciales</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>      df_info.loc[col] <span class="op">=</span> [data_series.count(), data_series.dtype, data_series.isnull().<span class="bu">sum</span>(), data_series.nunique(), is_numeric_dtype(data_series)]</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">#calculo el describe </span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  df_describe <span class="op">=</span> df.describe(include<span class="op">=</span><span class="st">'all'</span>).T[[<span class="st">'top'</span>, <span class="st">'mean'</span>, <span class="st">'std'</span>, <span class="st">'min'</span>, <span class="st">'25%'</span>, <span class="st">'50%'</span>, <span class="st">'75%'</span>, <span class="st">'max'</span>]]</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">#calculo sesgo y curtosis</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>  df_stats <span class="op">=</span> pd.DataFrame([df.skew(), df.kurtosis()], index<span class="op">=</span>[<span class="st">'sesgo'</span>, <span class="st">'kurt'</span>]).T</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> pd.concat([pd.Series(etiquetas,name<span class="op">=</span><span class="st">'Etiqueta'</span>),pd.concat([df_info,df_describe, df_stats], axis<span class="op">=</span><span class="dv">1</span>)], axis<span class="op">=</span><span class="dv">1</span>).fillna(<span class="st">'-'</span>)</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>df_uni_stats <span class="op">=</span> univariado_info(df).reset_index()</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>df_uni_stats.set_index(df_uni_stats[<span class="st">'index'</span>],inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>df_uni_stats.drop([<span class="st">'index'</span>],axis<span class="op">=</span><span class="dv">1</span>,inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="co"># df_uni_stats.rename(index={'index':'variable'},inplace=True)</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>df_uni_stats</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\JMC\AppData\Local\Temp\ipykernel_47796\1026010198.py:22: FutureWarning: Dropping of nuisance columns in DataFrame reductions (with 'numeric_only=None') is deprecated; in a future version this will raise TypeError.  Select only valid columns before calling the reduction.
  df_stats = pd.DataFrame([df.skew(), df.kurtosis()], index=['sesgo', 'kurt']).T</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="461">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Etiqueta</th>
      <th>Cantidad</th>
      <th>Tipo</th>
      <th>Missing</th>
      <th>Unicos</th>
      <th>Numeric</th>
      <th>top</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
      <th>sesgo</th>
      <th>kurt</th>
    </tr>
    <tr>
      <th>index</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>id</th>
      <td>Clave que identifica la vivienda</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>5795</td>
      <td>False</td>
      <td>4291</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0.16901</td>
      <td>-0.953158</td>
    </tr>
    <tr>
      <th>nhogar</th>
      <td>La variable id + nhogar = clave que identifica...</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>7</td>
      <td>False</td>
      <td>1</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>21.366705</td>
      <td>687.880709</td>
    </tr>
    <tr>
      <th>miembro</th>
      <td>Variables id + nhogar + miembro = clave que id...</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>19</td>
      <td>False</td>
      <td>1</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1.940715</td>
      <td>8.605228</td>
    </tr>
    <tr>
      <th>comuna</th>
      <td>Comuna donde reside la persona encuestada</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>15</td>
      <td>False</td>
      <td>8</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0.103211</td>
      <td>-1.090936</td>
    </tr>
    <tr>
      <th>edad</th>
      <td>Edad de la persona encuestada</td>
      <td>14319</td>
      <td>int64</td>
      <td>0</td>
      <td>101</td>
      <td>True</td>
      <td>-</td>
      <td>38.81549</td>
      <td>23.11017</td>
      <td>0.0</td>
      <td>20.0</td>
      <td>37.0</td>
      <td>57.0</td>
      <td>100.0</td>
      <td>0.249452</td>
      <td>-0.868539</td>
    </tr>
    <tr>
      <th>sexo</th>
      <td>Sexo de la persona encuestada</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>2</td>
      <td>False</td>
      <td>Mujer</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>parentesco_jefe</th>
      <td>Parentesco entre la persona encuestada y el je...</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>9</td>
      <td>False</td>
      <td>Jefe</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>situacion_conyugal</th>
      <td>Situación conyugal de la persona encuestada</td>
      <td>14318</td>
      <td>object</td>
      <td>1</td>
      <td>7</td>
      <td>False</td>
      <td>Soltero/a</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>num_miembro_padre</th>
      <td>Número de miembro que corresponde al padre</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>9</td>
      <td>False</td>
      <td>No corresponde</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>num_miembro_madre</th>
      <td>Número de miembro que corresponde a la madre</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>11</td>
      <td>False</td>
      <td>No corresponde</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>estado_ocupacional</th>
      <td>Situación ocupacional de la persona encuestada</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>3</td>
      <td>False</td>
      <td>Ocupado</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>cat_ocupacional</th>
      <td>Categoría ocupacional de la persona encuestada</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>5</td>
      <td>False</td>
      <td>No corresponde</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>calidad_ingresos_lab</th>
      <td>Calidad de la declaración de ingresos laborale...</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>4</td>
      <td>False</td>
      <td>Tuvo ingresos y declara monto</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>ingreso_total_lab</th>
      <td>Ingreso total laboral percibido el mes anterior</td>
      <td>14319</td>
      <td>int64</td>
      <td>0</td>
      <td>440</td>
      <td>True</td>
      <td>-</td>
      <td>20078.62644</td>
      <td>34698.173111</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>2500.0</td>
      <td>30000.0</td>
      <td>1000000.0</td>
      <td>5.699235</td>
      <td>81.275336</td>
    </tr>
    <tr>
      <th>calidad_ingresos_no_lab</th>
      <td>Calidad de la declaración de ingresos no labor...</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>4</td>
      <td>False</td>
      <td>No tuvo ingresos</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>ingreso_total_no_lab</th>
      <td>Ingreso total no laboral percibido el mes ante...</td>
      <td>14319</td>
      <td>int64</td>
      <td>0</td>
      <td>375</td>
      <td>True</td>
      <td>-</td>
      <td>6016.234583</td>
      <td>16065.350052</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4000.0</td>
      <td>500000.0</td>
      <td>6.889678</td>
      <td>104.118617</td>
    </tr>
    <tr>
      <th>calidad_ingresos_totales</th>
      <td>Calidad de ingresos totales individuales</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>4</td>
      <td>False</td>
      <td>Tuvo ingresos y declara monto</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>ingresos_totales</th>
      <td>Ingreso total individual percibido el mes ante...</td>
      <td>14319</td>
      <td>int64</td>
      <td>0</td>
      <td>678</td>
      <td>True</td>
      <td>-</td>
      <td>26094.861024</td>
      <td>37152.503186</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>16000.0</td>
      <td>37000.0</td>
      <td>1000000.0</td>
      <td>5.333472</td>
      <td>68.292205</td>
    </tr>
    <tr>
      <th>calidad_ingresos_familiares</th>
      <td>Calidad de ingresos totales familiares</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>3</td>
      <td>False</td>
      <td>Tuvo ingresos y declara monto</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>ingresos_familiares</th>
      <td>Ingresos totales familiares percibido el mes a...</td>
      <td>14319</td>
      <td>int64</td>
      <td>0</td>
      <td>960</td>
      <td>True</td>
      <td>-</td>
      <td>70212.818423</td>
      <td>62685.684278</td>
      <td>0.0</td>
      <td>30000.0</td>
      <td>54000.0</td>
      <td>90000.0</td>
      <td>1000000.0</td>
      <td>3.312553</td>
      <td>20.475526</td>
    </tr>
    <tr>
      <th>ing_per_cap_familiar</th>
      <td>Ingreso familiar per capita percibido el mes a...</td>
      <td>14319</td>
      <td>int64</td>
      <td>0</td>
      <td>1257</td>
      <td>True</td>
      <td>-</td>
      <td>26192.009638</td>
      <td>27463.908496</td>
      <td>0.0</td>
      <td>10500.0</td>
      <td>19900.0</td>
      <td>33500.0</td>
      <td>1000000.0</td>
      <td>6.970584</td>
      <td>145.623563</td>
    </tr>
    <tr>
      <th>estado_educativo</th>
      <td>Asistencia (pasada o presente) o no a algún es...</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>3</td>
      <td>False</td>
      <td>No asiste pero asistió</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>sector_educativo</th>
      <td>Sector al que pertenece el establecimiento edu...</td>
      <td>14316</td>
      <td>object</td>
      <td>3</td>
      <td>4</td>
      <td>False</td>
      <td>No corresponde</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>nivel_actual</th>
      <td>Nivel cursado al momento de la encuesta</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>14</td>
      <td>False</td>
      <td>No corresponde</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>nivel_max_educativo</th>
      <td>Máximo nivel educativo que se cursó</td>
      <td>13265</td>
      <td>object</td>
      <td>1054</td>
      <td>7</td>
      <td>False</td>
      <td>Secundario/medio comun</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>años_escolaridad</th>
      <td>Años de escolaridad alcanzados</td>
      <td>14257</td>
      <td>float64</td>
      <td>62</td>
      <td>20</td>
      <td>True</td>
      <td>-</td>
      <td>10.907905</td>
      <td>5.353943</td>
      <td>0.0</td>
      <td>7.0</td>
      <td>12.0</td>
      <td>15.0</td>
      <td>19.0</td>
      <td>-0.624452</td>
      <td>-0.517683</td>
    </tr>
    <tr>
      <th>lugar_nacimiento</th>
      <td>Lugar de nacimiento de la persona encuestada</td>
      <td>14318</td>
      <td>object</td>
      <td>1</td>
      <td>7</td>
      <td>False</td>
      <td>CABA</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>afiliacion_salud</th>
      <td>Afiliación de salud de la persona encuestada</td>
      <td>14315</td>
      <td>object</td>
      <td>4</td>
      <td>5</td>
      <td>False</td>
      <td>Solo obra social</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>hijos_nacidos_vivos</th>
      <td>Tiene o tuvo hijos nacidos vivos</td>
      <td>6535</td>
      <td>object</td>
      <td>7784</td>
      <td>2</td>
      <td>False</td>
      <td>Si</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>cant_hijos_nac_vivos</th>
      <td>Cantidad de hijos nacidos vivos</td>
      <td>14319</td>
      <td>int64</td>
      <td>0</td>
      <td>14</td>
      <td>True</td>
      <td>-</td>
      <td>0.630072</td>
      <td>1.217323</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>15.0</td>
      <td>2.560422</td>
      <td>9.774595</td>
    </tr>
    <tr>
      <th>dominio</th>
      <td>¿la vivienda se ubica en una villa de emergencia?</td>
      <td>14319</td>
      <td>object</td>
      <td>0</td>
      <td>2</td>
      <td>False</td>
      <td>Resto de la Ciudad</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>Target</th>
      <td>Nivel máximo educativo</td>
      <td>13223</td>
      <td>object</td>
      <td>1096</td>
      <td>4</td>
      <td>False</td>
      <td>sec_completo</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Detectamos que nuestra variable target tiene 1054 valores nulos. Es importante tener este dato presente cuando querramos correr un algoritmo de clasificación.</p>
<section id="análisis-univariado" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="análisis-univariado"><span class="header-section-number">4.1</span> Análisis univariado</h2>
<section id="género-y-edad" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="género-y-edad"><span class="header-section-number">4.1.1</span> Género y edad</h3>
<p>Comenzamos con un pantallazo general sobre las primeras cualidades de los datos, como muestra representativa para la EPH, sobre quiénes son los ciudadanos representado en el dataset.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:8,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828663677,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="62721ff6-8bdb-4617-d3c8-edbf53b99f64" data-execution_count="462">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">1</span>, ncols<span class="op">=</span><span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">15</span>,<span class="dv">5</span>))</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>sex <span class="op">=</span> df[<span class="st">'sexo'</span>]</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>edad <span class="op">=</span> df[<span class="st">'edad'</span>]</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>sns.countplot(x<span class="op">=</span>sex, ax<span class="op">=</span>axes[<span class="dv">0</span>], palette <span class="op">=</span> <span class="st">'Set2'</span>).<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Observaciones por Género'</span>, xlabel<span class="op">=</span><span class="st">'Género'</span>, ylabel<span class="op">=</span><span class="st">'Conteo'</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Agrego los valores porcentuales de la variable sexo</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n,i <span class="kw">in</span> <span class="bu">enumerate</span>([<span class="st">'Mujer'</span>,<span class="st">'Varon'</span>]):</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  porc <span class="op">=</span> df[<span class="st">'sexo'</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>)[i]<span class="op">*</span><span class="dv">100</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  axes[<span class="dv">0</span>].text(n,df[<span class="st">'sexo'</span>].value_counts(normalize<span class="op">=</span><span class="va">False</span>).<span class="bu">round</span>(<span class="dv">2</span>)[i],porc.<span class="bu">round</span>(<span class="dv">2</span>).astype(<span class="bu">str</span>)<span class="op">+</span><span class="st">'%'</span>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>sns.histplot(x<span class="op">=</span>edad,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>            ax<span class="op">=</span>axes[<span class="dv">1</span>],</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span><span class="st">'#004488'</span>,</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>            bins<span class="op">=</span> <span class="st">'sturges'</span>,</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>            kde<span class="op">=</span><span class="va">True</span>).<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Distribución y densidad por edad'</span>, xlabel<span class="op">=</span><span class="st">'Edad'</span>, ylabel<span class="op">=</span><span class="st">'Conteo'</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-10-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>En la variable género los datos parecen equilibrados en las categorías. Para el caso de la variable “edad”, la distribución se asemeja a la de una normal.</p>
</section>
<section id="comuna" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="comuna"><span class="header-section-number">4.1.2</span> Comuna</h3>
<p>Seguimos observando la variable “comuna”. En la misma se muestra la comuna de la Ciudad de Buenos Aires del entrevistado, de manera de tener una ubicación geográfica. Consideramos importante revisar esta variable ya que tenemos como hipótesis que el nivel educativo alcanzado puede estar dependiendo de la zona geográfica de la ciudad en la que se encuentra el entrevistado.</p>
<div class="cell" data-execution_count="463">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#instalamos geopandas para trabajar con mapas</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>pip install geopandas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: geopandas in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (0.11.1)
Requirement already satisfied: fiona&gt;=1.8 in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from geopandas) (1.8.21)
Requirement already satisfied: packaging in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from geopandas) (21.3)
Requirement already satisfied: pyproj&gt;=2.6.1.post1 in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from geopandas) (3.3.1)
Requirement already satisfied: pandas&gt;=1.0.0 in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from geopandas) (1.4.3)
Requirement already satisfied: shapely&lt;2,&gt;=1.7 in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from geopandas) (1.8.2)
Requirement already satisfied: gdal~=3.4.3 in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from fiona&gt;=1.8-&gt;geopandas) (3.4.3)
Requirement already satisfied: six&gt;=1.7 in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from fiona&gt;=1.8-&gt;geopandas) (1.16.0)
Requirement already satisfied: attrs&gt;=17 in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from fiona&gt;=1.8-&gt;geopandas) (22.1.0)
Requirement already satisfied: certifi in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from fiona&gt;=1.8-&gt;geopandas) (2022.6.15)
Requirement already satisfied: click&gt;=4.0 in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from fiona&gt;=1.8-&gt;geopandas) (8.1.3)
Requirement already satisfied: munch in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from fiona&gt;=1.8-&gt;geopandas) (2.5.0)
Requirement already satisfied: cligj&gt;=0.5 in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from fiona&gt;=1.8-&gt;geopandas) (0.7.2)
Requirement already satisfied: click-plugins&gt;=1.0 in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from fiona&gt;=1.8-&gt;geopandas) (1.1.1)
Requirement already satisfied: setuptools in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from fiona&gt;=1.8-&gt;geopandas) (63.2.0)
Requirement already satisfied: pytz&gt;=2020.1 in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from pandas&gt;=1.0.0-&gt;geopandas) (2022.2)
Requirement already satisfied: numpy&gt;=1.21.0 in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from pandas&gt;=1.0.0-&gt;geopandas) (1.22.4+vanilla)
Requirement already satisfied: python-dateutil&gt;=2.8.1 in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from pandas&gt;=1.0.0-&gt;geopandas) (2.8.2)
Requirement already satisfied: pyparsing!=3.0.5,&gt;=2.0.2 in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from packaging-&gt;geopandas) (3.0.9)
Requirement already satisfied: colorama in c:\users\jmc\appdata\local\programs\python\python310\lib\site-packages (from click&gt;=4.0-&gt;fiona&gt;=1.8-&gt;geopandas) (0.4.5)
Note: you may need to restart the kernel to use updated packages.</code></pre>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:2249,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828668989,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="023700a1-d74f-469b-a387-80c365002861" data-execution_count="464">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> cgitb <span class="im">import</span> text</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Vamos a generar un mapa, así que vamos a importar el mapa de comunas de la Ciudad de Buenos Ainres</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>comunas <span class="op">=</span> gpd.read_file(<span class="st">"https://github.com/LHukovsky/Coderhouse-Final-Project-/raw/main/comunas.geojson"</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Transformamos las variables que vamos a usar para joinear el mapa con la base de manera que coincidan</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>comunas[<span class="st">"COMUNAS"</span>] <span class="op">=</span> comunas[<span class="st">"COMUNAS"</span>].<span class="bu">apply</span>(<span class="bu">int</span>).<span class="bu">apply</span>(<span class="bu">str</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformamos la base para contablizar la frecuencia con la que aparece cada comuna en la base</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>com <span class="op">=</span> pd.DataFrame(df[<span class="st">"comuna"</span>].value_counts()).reset_index()</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Unimos ambos datasets</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>df_com <span class="op">=</span> gpd.GeoDataFrame(pd.merge(com,comunas[[<span class="st">"COMUNAS"</span>,<span class="st">"geometry"</span>]],left_on<span class="op">=</span><span class="st">"index"</span>,right_on<span class="op">=</span><span class="st">"COMUNAS"</span>))</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co">#generamos el lienzo</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>fig , ax <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">1</span>, ncols<span class="op">=</span><span class="dv">2</span>, sharex<span class="op">=</span><span class="va">False</span>, figsize<span class="op">=</span>(<span class="dv">20</span>,<span class="dv">8</span>))</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>plt.rcParams.update({<span class="st">"font.size"</span>:<span class="dv">9</span>,<span class="st">"axes.titlesize"</span>:<span class="dv">25</span>,<span class="st">"axes.labelsize"</span>:<span class="dv">15</span>, <span class="st">'font.family'</span>:<span class="st">'serif'</span>})</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="co">#mapa</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>df_com[[<span class="st">"comuna"</span>,<span class="st">"geometry"</span>]].plot(ax<span class="op">=</span> ax[<span class="dv">1</span>],column<span class="op">=</span><span class="st">"comuna"</span>,legend<span class="op">=</span><span class="va">True</span>,cmap<span class="op">=</span><span class="st">"viridis"</span>,</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>           legend_kwds<span class="op">=</span>{<span class="st">'label'</span>: <span class="st">""</span>})</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="co">#agrego un gráfico de barras</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>sns.barplot(data<span class="op">=</span>df_com, x<span class="op">=</span><span class="st">"COMUNAS"</span>, y<span class="op">=</span><span class="st">'comuna'</span>, color<span class="op">=</span><span class="st">'COMUNAS'</span>, palette<span class="op">=</span><span class="st">'Paired'</span>, ax<span class="op">=</span>ax[<span class="dv">0</span>])</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a><span class="co">#genero una nueva variable con las coordenadas para poder agregar etiquetas en el centro geográfico de cada comuna</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>df_com[<span class="st">'coords'</span>] <span class="op">=</span> df_com[<span class="st">'geometry'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.representative_point().coords[:])</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>df_com[<span class="st">'coords'</span>] <span class="op">=</span> [coords[<span class="dv">0</span>] <span class="cf">for</span> coords <span class="kw">in</span> df_com[<span class="st">'coords'</span>]]</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx, row <span class="kw">in</span> df_com.iterrows():</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>    plt.annotate(row[<span class="st">'COMUNAS'</span>], xy<span class="op">=</span>row[<span class="st">'coords'</span>],horizontalalignment<span class="op">=</span><span class="st">'center'</span>,size<span class="op">=</span><span class="dv">15</span>,color<span class="op">=</span><span class="st">"r"</span>)</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="co">#Título y etiquetas de variables    </span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="st">"Cantidad de encuestados por comuna"</span>)</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_ylabel(<span class="st">"Cantidad"</span>)</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_xlabel(<span class="st">"Comuna"</span>)</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].get_xaxis().set_visible(<span class="va">False</span>)</span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].get_yaxis().set_visible(<span class="va">False</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-12-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Observando los dos gráficos generados vemos que las comunas 1,4,7 y 8 tienen mayor cantidad de casos. Queda por verse si en posteriores análisis es necesario abordar esta diferencia para evitar sesgos. Para eso, será necesario tomar en cuenta el porcentaje de la población total de cada comuna.</p>
</section>
<section id="ingreso-familiar-per-capita" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="ingreso-familiar-per-capita"><span class="header-section-number">4.1.3</span> Ingreso familiar per capita</h3>
<p>Ahora probamos con observar los ingresos familiares. Creemos que puede ser un indicador interesante del nivel educativo.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:6,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828668990,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="465">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Armamos una función para graficar y jugar con el nivel del filtrado de la variable y obtener un histograma</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">#que permita apreciar mejor la distribución de la variable sin tantos outliers</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hist_box(DataFrame, <span class="co">#dataset</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>             x, <span class="co">#variable del gráfico</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>             limite,<span class="co"># frecuencia del rango para la etiqueta del eje x</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>             bins): </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">#sns.set(style="white", rc={"lines.linewidth": 2, "font.size":9,</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#                           "axes.titlesize":20,"axes.labelsize":17, 'font.family':'serif'})</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">20</span>,<span class="dv">10</span>),nrows<span class="op">=</span><span class="dv">2</span>,ncols<span class="op">=</span><span class="dv">1</span>,sharex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  sns.histplot(x<span class="op">=</span>x,</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>              data<span class="op">=</span>df[df[x]<span class="op">&lt;</span>limite] ,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>              color<span class="op">=</span><span class="st">'#004488'</span>,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>              ax<span class="op">=</span>ax[<span class="dv">1</span>],</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>              bins<span class="op">=</span> bins,</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>              kde<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  ax[<span class="dv">0</span>].boxplot(x<span class="op">=</span>df[df[x]<span class="op">&lt;</span>limite][x],vert<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>  ax[<span class="dv">0</span>].set_title(<span class="ss">f"</span><span class="sc">{</span>etiquetas[x]<span class="sc">}</span><span class="ss"> menor a </span><span class="sc">{</span>limite<span class="sc">}</span><span class="ss">"</span>,size<span class="op">=</span><span class="dv">25</span>)</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  ax[<span class="dv">1</span>].set_title(<span class="st">""</span>)</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  ax[<span class="dv">0</span>].<span class="bu">set</span>(xticks<span class="op">=</span><span class="bu">range</span>(<span class="dv">0</span>,limite<span class="op">+</span><span class="dv">1</span>,<span class="bu">int</span>(limite<span class="op">/</span><span class="dv">20</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:766,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828669751,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="0ce28f2e-7be8-4ceb-cb3f-30456bd034bd" data-execution_count="466">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#probamos graficando con el máximo de la variable</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>hist_box(df,<span class="st">'ing_per_cap_familiar'</span>,<span class="bu">max</span>(df.ing_per_cap_familiar),bins<span class="op">=</span><span class="dv">30</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-14-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Como hay muchos outliers que impiden ver la distribución correctamente, los quitamos de los gráficos.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:751,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828670494,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="c1461aa6-e3f3-473f-c7cf-8dbba8c76ebd" data-execution_count="467">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Ahora probamos quitando los outliers</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>r75 <span class="op">=</span> <span class="bu">int</span>(df.describe()[<span class="st">"ing_per_cap_familiar"</span>][<span class="st">"75%"</span>]) <span class="co">#tercer cuartil</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>r25 <span class="op">=</span> <span class="bu">int</span>(df.describe()[<span class="st">"ing_per_cap_familiar"</span>][<span class="st">"25%"</span>]) <span class="co">#segundo cuartil</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>O <span class="op">=</span> r75 <span class="op">+</span> <span class="fl">1.5</span> <span class="op">*</span> (r75<span class="op">-</span>r25) <span class="co">#calculamos el límite inferior a los outliers</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>hist_box(df,<span class="st">"ing_per_cap_familiar"</span>,<span class="bu">int</span>(O),bins<span class="op">=</span><span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-15-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>De este forma vemos que, aún removiendo los outliers, la distribución sigue sesgada.</p>
</section>
<section id="años-de-escolaridad" class="level3" data-number="4.1.4">
<h3 data-number="4.1.4" class="anchored" data-anchor-id="años-de-escolaridad"><span class="header-section-number">4.1.4</span> Años de escolaridad</h3>
<p>Ahora nos enfocamos en analizar los años de escolaridad de los encuestados. Es importante tener presente esta variable en el futuro puesto que es muy probable que correlacione positivamente con nuestro target.</p>
<p>Comenzamos observando algunas estadísticas descriptivas, sumando para ello un histogramas a nuestro análisis:</p>
<div class="cell" data-cellview="code" data-executioninfo="{&quot;elapsed&quot;:9,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828670495,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="35d1216d-08a4-413f-cd09-fed2ecb3d909" data-execution_count="468">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Texto de título predeterminado</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>df.describe()[[<span class="st">"años_escolaridad"</span>]].T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="468">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>años_escolaridad</th>
      <td>14257.0</td>
      <td>10.907905</td>
      <td>5.353943</td>
      <td>0.0</td>
      <td>7.0</td>
      <td>12.0</td>
      <td>15.0</td>
      <td>19.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:730,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828671218,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="eff7592b-df37-40ce-b069-a2847bd52489" data-execution_count="469">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">5</span>))</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>sns.histplot(x<span class="op">=</span><span class="st">"años_escolaridad"</span>,data<span class="op">=</span>df,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">'#004488'</span>,bins<span class="op">=</span> <span class="dv">10</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>             kde<span class="op">=</span><span class="va">True</span>).set_xlabel(etiquetas[<span class="st">"años_escolaridad"</span>])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-17-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>A simple vista se observan tres “picos”: en el valor mínimo, alrededor del 7.5 y alrededor del 12.5. Podemos inferir que estos tres casos corresponden a no tener estudios, solo haber transcurrido el primario y haber transcurrido hasta la educación secundaria, respectivamente.</p>
</section>
<section id="máximo-nivel-educativo-target" class="level3" data-number="4.1.5">
<h3 data-number="4.1.5" class="anchored" data-anchor-id="máximo-nivel-educativo-target"><span class="header-section-number">4.1.5</span> Máximo nivel educativo (Target)</h3>
<p>Nos avocamos a analizar nuestro target, para eso vamos a tomar en cuenta su frencuencia absoluta así como su frecuencia relativa.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:857,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828672069,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="470">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> freq_table(df, col):</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#seleccion de data</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  data <span class="op">=</span> df[col]</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#verificacion de columna y si queremos cortes de intervalos</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="kw">not</span> is_numeric_dtype(data):</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#or not with_cuts:</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#generaion de tabla de frecuenca ,con info absoluta</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    freq_tab <span class="op">=</span> pd.crosstab(data, columns<span class="op">=</span><span class="st">'FreqAbs'</span>).sort_values(<span class="st">'FreqAbs'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#calculo del resto de la tabla de frecuencia</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  freq_tab[<span class="st">'FreqRel'</span>] <span class="op">=</span> freq_tab[<span class="st">'FreqAbs'</span>] <span class="op">/</span> freq_tab[<span class="st">'FreqAbs'</span>].<span class="bu">sum</span>()</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  freq_tab[[<span class="st">'FAbsAcumulada'</span>, <span class="st">'FAbsRelativa'</span>]] <span class="op">=</span> freq_tab[[<span class="st">'FreqAbs'</span>,<span class="st">'FreqRel'</span>]].cumsum()</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> freq_tab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:422,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828672484,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="fe998b5f-564d-4cbe-e12a-1aa0b608c5c1" data-execution_count="471">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">1</span>, ncols<span class="op">=</span><span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">20</span>,<span class="dv">8</span>), sharey<span class="op">=</span><span class="va">True</span>)<span class="op">;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>sns.histplot(x<span class="op">=</span>df[<span class="st">'Target'</span>], ax<span class="op">=</span>axes[<span class="dv">0</span>], </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>             color <span class="op">=</span> <span class="st">'C3'</span>).<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Observaciones por Nivel Máximo Educativo'</span>, </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>                               xlabel<span class="op">=</span><span class="st">''</span>,</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>                               ylabel<span class="op">=</span><span class="st">'Frecuencia Absoluta'</span>)<span class="op">;</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>nivel  <span class="op">=</span> freq_table(df, <span class="st">'Target'</span>).reset_index().sort_values(<span class="st">'FreqAbs'</span>, ascending<span class="op">=</span><span class="va">False</span>)<span class="op">;</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>sns.barplot(data<span class="op">=</span>nivel, x<span class="op">=</span><span class="st">'Target'</span>, y<span class="op">=</span><span class="st">'FreqAbs'</span>, ax<span class="op">=</span>axes[<span class="dv">1</span>], </span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span><span class="st">"C0"</span>).<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Gráfico de Pareto para  Nivel Máximo Educativo'</span>, </span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>                            xlabel<span class="op">=</span><span class="st">''</span>,</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>                            ylabel<span class="op">=</span><span class="st">'Frecuencia Absoluta'</span>)<span class="op">;</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> axes[<span class="dv">1</span>].twinx()<span class="op">;</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>sns.lineplot(nivel[<span class="st">'Target'</span>], nivel[<span class="st">"FAbsRelativa"</span>], color<span class="op">=</span><span class="st">"C1"</span>, marker<span class="op">=</span><span class="st">"o"</span>, ms<span class="op">=</span><span class="dv">5</span>, ax<span class="op">=</span>ax2)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\JMC\AppData\Local\Programs\Python\Python310\lib\site-packages\seaborn\_decorators.py:36: FutureWarning: Pass the following variables as keyword args: x, y. From version 0.12, the only valid positional argument will be `data`, and passing other arguments without an explicit keyword will result in an error or misinterpretation.
  warnings.warn(</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-19-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Podemos observar que el nivel maximo educativo más alcanzado es el secundario completo, seguido por el primario. Contrario de lo que habíamos intuido anteriormente, el nivel superior quedó en tercer lugar. Adicionalmente, el nivel secundario y primario explican casi el 77% de los datos.</p>
</section>
</section>
<section id="análisis-bivariado" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="análisis-bivariado"><span class="header-section-number">4.2</span> Análisis bivariado</h2>
<p>Para comenzar el análisis bivariado del problema, realizamos diferentes heatmaps para ver si algo nos llama la atención entre las variables numéricas.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:1049,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828673528,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="1d6f308e-ca48-4db6-e2f5-43aef439f20f" data-execution_count="472">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#generacion de los graficos de correlacion con el método Spearman</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">10</span>))</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>plt.rcParams.update({<span class="st">"font.size"</span>:<span class="dv">9</span>,<span class="st">"axes.titlesize"</span>:<span class="dv">15</span>,<span class="st">"axes.labelsize"</span>:<span class="dv">15</span>, <span class="st">'font.family'</span>:<span class="st">'serif'</span>})</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>correlation <span class="op">=</span> df.dropna().corr(method<span class="op">=</span><span class="st">"spearman"</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>high_corr<span class="op">=</span>correlation[correlation<span class="op">&gt;=</span><span class="fl">0.0</span>]</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>sns.heatmap(correlation, linewidth <span class="op">=</span> <span class="dv">2</span>, annot<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Correlación de variables </span><span class="ch">\n</span><span class="st"> método Spearman"</span>, fontsize<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>plt.yticks(fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>plt.xticks(fontsize<span class="op">=</span><span class="dv">14</span>, rotation<span class="op">=</span><span class="dv">30</span>,  ha<span class="op">=</span><span class="st">'right'</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-20-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>A simple vista, no se observan fuertes correlaciones.</p>
<p>Podemos notar que la variable “años_escolaridad” correlaciona moderadamente bien con variablres relacionadas al ingreso. La principal correlación positiva es “años_escolaridad” con ingreso familiar per cápita (“ing_per_cap_familiar”), lo cual hace sentido teórico.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:854,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828674379,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="bce0105a-2c1d-4362-8920-126a999d14c1" data-execution_count="473">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#metodo para solo graficar en base a un threshold</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>lista<span class="op">=</span>[<span class="fl">.6</span>,<span class="fl">.5</span>] <span class="co">#treshold de los gráficos (si se quieren agregar más gráficos se puede hacer agregando tresholds a la lista)</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>fig , ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">20</span>,<span class="dv">8</span>), ncols<span class="op">=</span><span class="bu">len</span>(lista) ,sharey<span class="op">=</span><span class="va">True</span>, sharex<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>mat_corr_spearman <span class="op">=</span> df.corr(<span class="st">'spearman'</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n,i <span class="kw">in</span> <span class="bu">enumerate</span>(lista):</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  high_corr <span class="op">=</span> mat_corr_spearman[mat_corr_spearman<span class="op">&gt;=</span>i]</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">12</span>))</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  sns.heatmap(high_corr, cmap<span class="op">=</span><span class="st">"Blues"</span>,ax<span class="op">=</span>ax[n], annot<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  ax[n].set_title(<span class="st">'Altas correlaciones</span><span class="ch">\n</span><span class="st">&gt;='</span><span class="op">+</span><span class="bu">str</span>(i),size<span class="op">=</span><span class="dv">20</span>)<span class="op">;</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  sns.<span class="bu">set</span>(font_scale<span class="op">=</span><span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  ax[n].set_xticklabels(high_corr,rotation<span class="op">=</span><span class="dv">30</span>, ha<span class="op">=</span><span class="st">'right'</span>, minor<span class="op">=</span><span class="va">False</span>)<span class="op">;</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-21-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 720x864 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 720x864 with 0 Axes&gt;</code></pre>
</div>
</div>
<p>Aquí, vemos que los años de escolaridad alcanzados por los entrevistados tienen algo relación (0.66) con la variable “ingresos_totales”.</p>
<p>Por último corremos una tabla de correlación y filtramos las de valores más altos</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:7,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828674380,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="7c9570c4-e2b7-4dcd-f62a-e21f54a8a930" data-execution_count="474">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> corrFilter(x: pd.DataFrame, thres: <span class="bu">float</span>):</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">#generate corr </span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    xCorr <span class="op">=</span> x.corr(<span class="st">'spearman'</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">#filter corr by thres</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    xFiltered <span class="op">=</span> xCorr[((xCorr <span class="op">&gt;=</span> thres) <span class="op">|</span> (xCorr <span class="op">&lt;=</span> <span class="op">-</span>thres)) <span class="op">&amp;</span> (xCorr <span class="op">!=</span><span class="fl">1.000</span>)]</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">#change dataframe format</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    xFlattened <span class="op">=</span> xFiltered.unstack().drop_duplicates().reset_index().sort_values(<span class="dv">0</span>, ascending<span class="op">=</span> <span class="va">False</span>).dropna()</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">#rename columns</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    xFlattened.columns <span class="op">=</span> [<span class="st">'Variable_1'</span>, <span class="st">'Variable_2'</span>, <span class="st">'corr_value'</span>]</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> xFlattened</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>corrFilter(df, <span class="fl">.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="474">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Variable_1</th>
      <th>Variable_2</th>
      <th>corr_value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3</th>
      <td>ingreso_total_lab</td>
      <td>ingresos_totales</td>
      <td>0.810840</td>
    </tr>
    <tr>
      <th>7</th>
      <td>ingresos_familiares</td>
      <td>ing_per_cap_familiar</td>
      <td>0.769356</td>
    </tr>
    <tr>
      <th>6</th>
      <td>ingresos_totales</td>
      <td>años_escolaridad</td>
      <td>0.656880</td>
    </tr>
    <tr>
      <th>5</th>
      <td>ingresos_totales</td>
      <td>ing_per_cap_familiar</td>
      <td>0.598997</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ingreso_total_lab</td>
      <td>años_escolaridad</td>
      <td>0.579614</td>
    </tr>
    <tr>
      <th>1</th>
      <td>edad</td>
      <td>ingreso_total_no_lab</td>
      <td>0.578532</td>
    </tr>
    <tr>
      <th>2</th>
      <td>edad</td>
      <td>ingresos_totales</td>
      <td>0.570521</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p><strong>Conclusiones:</strong></p>
<ul>
<li>Como es esperable, hay alta correlación entre las variables relacionadas al ingreso</li>
<li>A su vez, encontramos una alta correlación (66%) entre los ingresos y los años de escolaridad</li>
<li>También observamos una relación positiva entre la edad y los ingresos totales</li>
</ul>
<section id="comparación-entre-variables-numéricas" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="comparación-entre-variables-numéricas"><span class="header-section-number">4.2.1</span> Comparación entre variables numéricas</h3>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:1434,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828675808,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="064dc9ad-4c6b-4505-ea01-bc5b8cff6a25" data-execution_count="475">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grafico lineal en base a edad con dos variables de calculo</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">30</span>, <span class="dv">9</span>))</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>grouped_day <span class="op">=</span> df.groupby(<span class="st">'edad'</span>)[<span class="st">'ingresos_totales'</span>, </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">'ingresos_familiares'</span>].<span class="bu">sum</span>().reset_index()</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.pointplot(x <span class="op">=</span> <span class="st">'edad'</span>, y <span class="op">=</span> <span class="st">'ingresos_totales'</span>, data<span class="op">=</span>grouped_day, </span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>                   color <span class="op">=</span> <span class="st">'blue'</span>, label<span class="op">=</span><span class="st">'ingresos_totales'</span>)<span class="op">;</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> ax.twinx()<span class="op">;</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.pointplot(x <span class="op">=</span> <span class="st">'edad'</span>, y <span class="op">=</span> <span class="st">'ingresos_familiares'</span>, data<span class="op">=</span>grouped_day,  </span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>                   color <span class="op">=</span> <span class="st">'red'</span>, label<span class="op">=</span><span class="st">'ingresos_familiares'</span>, ax<span class="op">=</span>ax2)</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Ingresos totales y familiares por edad"</span>,size<span class="op">=</span><span class="dv">25</span>)</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>ax.set_xticks(<span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">101</span>,<span class="dv">10</span>))</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>ax.set_xticklabels(<span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">101</span>,<span class="dv">10</span>))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\JMC\AppData\Local\Temp\ipykernel_47796\281383307.py:5: FutureWarning: Indexing with multiple keys (implicitly converted to a tuple of keys) will be deprecated, use a list instead.
  grouped_day = df.groupby('edad')['ingresos_totales',</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-23-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Se puede ver que desde los 30 años en adelante el ingreso total de la persona se corresponde con el ingreso familiar. Por ende suele haber un unico ingreso fuerte por grupo familiar.</p>
</section>
<section id="comparación-de-variables-categóricas-con-numéricas" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="comparación-de-variables-categóricas-con-numéricas"><span class="header-section-number">4.2.2</span> Comparación de variables categóricas con numéricas</h3>
<p>Adicionalmente, vamos a comparar algunas variables con nuestro target, comenzando con los ingresos totales.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:816,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828676621,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="1a21f651-8657-42c2-9497-09510277b0eb" data-execution_count="476">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>lista <span class="op">=</span> [<span class="st">'ingresos_totales'</span>,<span class="st">'ingresos_familiares'</span>,<span class="st">'cant_hijos_nac_vivos'</span>,<span class="st">'años_escolaridad'</span>]</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">28</span>,<span class="dv">10</span>),ncols<span class="op">=</span><span class="bu">len</span>(lista))</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n,i <span class="kw">in</span> <span class="bu">enumerate</span>(lista):</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  sns.boxplot(x <span class="op">=</span> <span class="st">'sexo'</span>, y<span class="op">=</span> i, data<span class="op">=</span>df,ax<span class="op">=</span>ax[n],orient<span class="op">=</span><span class="st">'v'</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  ax[n].set_ylabel(etiquetas[i],size<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  ax[n].set_xlabel(<span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-24-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Probemos quitando outliers, a excepciónn de la cantidad de hijos nacidos vivos (puesto que no arrojará ningún dato nuevo) y de años de escolaridad (que no tiene outliers)</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:641,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828677259,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="7f71a3ee-2397-4e7c-ba90-c87f11b162a0" data-execution_count="477">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>lista <span class="op">=</span> [<span class="st">'ingresos_totales'</span>,<span class="st">'ingresos_familiares'</span>]</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">16</span>,<span class="dv">7</span>),ncols<span class="op">=</span><span class="bu">len</span>(lista))</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n,i <span class="kw">in</span> <span class="bu">enumerate</span>(lista):</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  data <span class="op">=</span> df[df[i]<span class="op">&lt;</span>df[i].describe()[<span class="st">'75%'</span>]]</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  sns.boxplot(x <span class="op">=</span> <span class="st">'sexo'</span>, y<span class="op">=</span> i, data<span class="op">=</span>data,ax<span class="op">=</span>ax[n],orient<span class="op">=</span><span class="st">'v'</span>)</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  ax[n].set_ylabel(etiquetas[i],size<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  ax[n].set_xlabel(<span class="st">""</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-25-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Por parte de las variables de ingreso, no parece haber nada disruptivo. La distribución por ingreso y años de escolaridad pareciera ocurrir pero no en un orden lineal.</p>
<p>Llama la atención la variable “sexo”: por algún motivo, todos los encuestados hombres figuran sin hijos nacidos vivos. Alternativamente, se podría investigar la metodología de la encuesta para ver si hay alguna respuesta. Adicionalmente, los hombres parecieran tener ingresos totales y familiares mayores que las mujeres, pero no pareciera que haya distribuciones desiguales en los años de escolaridad.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:750,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828678006,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="ef6f40c7-bc3a-4ac3-8394-83c697523451" data-execution_count="478">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">22</span>,<span class="dv">10</span>),nrows<span class="op">=</span><span class="dv">2</span>, sharex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>sns.boxplot(y <span class="op">=</span> <span class="st">'Target'</span>, </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span><span class="st">'ingresos_totales'</span>, </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>            data<span class="op">=</span>df,ax<span class="op">=</span>ax[<span class="dv">0</span>]).<span class="bu">set</span>(title<span class="op">=</span><span class="st">"Ingresos totales por nivel máximo educativo"</span>, </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>                                  ylabel<span class="op">=</span><span class="st">"Nivel máximo educativo"</span>, xlabel<span class="op">=</span><span class="st">"Ingresos totales"</span>)<span class="op">;</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>sns.boxplot(y <span class="op">=</span> <span class="st">'Target'</span>, </span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span><span class="st">'ingresos_familiares'</span>, </span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>            data<span class="op">=</span>df,ax<span class="op">=</span>ax[<span class="dv">1</span>]).<span class="bu">set</span>(title<span class="op">=</span><span class="st">"Ingresos familiares por nivel máximo educativo"</span>, </span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>                                  ylabel<span class="op">=</span><span class="st">"Nivel máximo educativo"</span>, xlabel<span class="op">=</span><span class="st">"Ingresos familiares"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-26-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Ahora probemos sin los outliers, poniendo como tope el percentil 75 del valor de target con mayor valor de ingresos (secundario completo)</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:678,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828678677,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="1b33b131-5fcc-4f14-9e31-6ca83e3727b8" data-execution_count="479">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">22</span>,<span class="dv">5</span>))</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>df[df[<span class="st">'ingresos_totales'</span>]<span class="op">&lt;</span>(df[df[<span class="st">'Target'</span>]<span class="op">==</span><span class="st">'sec_completo'</span>][<span class="st">'ingresos_totales'</span>].describe()[<span class="st">'75%'</span>])],</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>            y <span class="op">=</span> <span class="st">'Target'</span>, </span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span><span class="st">'ingresos_totales'</span>,            </span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>            ax<span class="op">=</span>ax).<span class="bu">set</span>(title<span class="op">=</span><span class="st">"Ingresos totales por nivel máximo educativo"</span>, </span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>                                  ylabel<span class="op">=</span><span class="st">"Nivel máximo educativo"</span>, xlabel<span class="op">=</span><span class="st">"Ingresos totales"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-27-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Parece que para el nivel inicial la remoción de outliers en otra categoría sigue siendo insuficiente para mostrar la distribución real de la variable. Echemos un vistazo a los valores de esta categoría.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:12,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828678678,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="342b8efa-3a07-4ec8-fd67-a703fbd3ca63" data-execution_count="480">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>sns.histplot(data<span class="op">=</span>df[df[<span class="st">'Target'</span>]<span class="op">==</span><span class="st">'inicial'</span>],x<span class="op">=</span><span class="st">'ingresos_totales'</span>,bins<span class="op">=</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="480">
<pre><code>&lt;AxesSubplot:xlabel='ingresos_totales', ylabel='Count'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-28-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Logicamente, la enorme mayoría de los ingresos para el valor inicial dan 0, puesto que incluye a personas que en ese momento estaban cursando su educación inicial, por lo que tenían entre 2 y 6 años.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:544,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828679216,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="c87099e6-6f6e-4368-98fc-2c0f0bb7eb03" data-execution_count="481">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">22</span>,<span class="dv">5</span>))</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>sns.boxplot(y <span class="op">=</span> <span class="st">'Target'</span>, </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span><span class="st">'ingresos_familiares'</span>, </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>            data<span class="op">=</span>df[df[<span class="st">'ingresos_familiares'</span>]<span class="op">&lt;</span>(df[df[<span class="st">'Target'</span>]<span class="op">==</span><span class="st">'sec_completo'</span>][<span class="st">'ingresos_familiares'</span>].describe()[<span class="st">'75%'</span>])],</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>            ax<span class="op">=</span>ax).<span class="bu">set</span>(title<span class="op">=</span><span class="st">"Ingresos familiares por nivel máximo educativo"</span>, </span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>                                  ylabel<span class="op">=</span><span class="st">"Nivel máximo educativo"</span>, xlabel<span class="op">=</span><span class="st">"Ingresos familiares"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-29-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>En definitiva, se observa un corrimiento de los valores centrales (dentro de la caja) hacia la izquierda a medida que aumenta el nivel educativo.</p>
</section>
<section id="variable-numéricas-con-comuna" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="variable-numéricas-con-comuna"><span class="header-section-number">4.2.3</span> Variable numéricas con comuna</h3>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:4433,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828683644,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="62346eb0-96ec-4598-c8c4-45fd1f1c5440" data-execution_count="482">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Unimos ambos datasets</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tkinter <span class="im">import</span> Variable</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> gpd.GeoDataFrame(pd.merge(pd.DataFrame(df.value_counts([<span class="st">'Target'</span>,<span class="st">'comuna'</span>])).reset_index(),</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>                                    comunas[[<span class="st">"COMUNAS"</span>,<span class="st">"geometry"</span>]],left_on<span class="op">=</span><span class="st">"comuna"</span>,right_on<span class="op">=</span><span class="st">"COMUNAS"</span>))</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Renombramos una columna para que lo pueda procesar la función de geopandas</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>m[<span class="st">'count'</span>] <span class="op">=</span> m[<span class="dv">0</span>]</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="co">#generamos el lienzo</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>fig , ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">10</span>),ncols<span class="op">=</span><span class="dv">2</span>,nrows<span class="op">=</span><span class="dv">2</span>,sharex<span class="op">=</span><span class="va">True</span>,sharey<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>plt.rcParams.update({<span class="st">"font.size"</span>:<span class="dv">12</span>,<span class="st">"axes.titlesize"</span>:<span class="dv">25</span>,<span class="st">"axes.labelsize"</span>:<span class="dv">15</span>, <span class="st">'font.family'</span>:<span class="st">'serif'</span>})</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mapa(variable,etiqueta,fila,columna):</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">#mapa </span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  m[m[<span class="st">'Target'</span>]<span class="op">==</span>variable].plot(column<span class="op">=</span><span class="st">'count'</span>,</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>                                legend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>                                cmap<span class="op">=</span><span class="st">"viridis"</span>,</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>                                legend_kwds<span class="op">=</span>{<span class="st">'label'</span>: <span class="st">""</span>},</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>                                ax<span class="op">=</span>ax[fila,columna])</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Título y etiquetas de variables    </span></span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>  ax[fila,columna].set_title(etiqueta,size<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>  ax[fila,columna].get_xaxis().set_visible(<span class="va">False</span>)</span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a>  ax[fila,columna].get_yaxis().set_visible(<span class="va">False</span>)<span class="op">;</span></span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>mapa(<span class="st">"superior"</span>,<span class="st">"Nivel superior"</span>,<span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>mapa(<span class="st">"sec_completo"</span>,<span class="st">"Nivel Secundario"</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a>mapa(<span class="st">"prim_completo"</span>,<span class="st">"Nivel Primario"</span>,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>mapa(<span class="st">"inicial"</span>,<span class="st">"Nivel Inicial"</span>,<span class="dv">0</span>,<span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-30-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Se observa que en el sur de la ciudad hay mayor cantidad de encuestados con niveles de inicial, primario y secundario completo, mientras que el norte (particularmente el barrio de Palermo) tiene mayor cantidad de personas con estudios superiores. En menor medida también las comunas del este (comunmente llamado el “centro” de la ciudad) destacan por la cantidad de encuestados con nivel superior.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:1195,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828684828,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="6df12f3c-7007-4dd6-8535-210f9df58adb" data-execution_count="483">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">#armamos el mismo dataset anterior pero tomando el promedio de cada variable por comuna</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> gpd.GeoDataFrame(pd.merge(df.groupby(<span class="st">"comuna"</span>).aggregate(np.mean),</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>                                    comunas[[<span class="st">"COMUNAS"</span>,<span class="st">"geometry"</span>]],left_on<span class="op">=</span><span class="st">"comuna"</span>,right_on<span class="op">=</span><span class="st">"COMUNAS"</span>))</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co">#redondeamos los valores</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>m[<span class="st">"años_escolaridad"</span>] <span class="op">=</span> <span class="bu">round</span>(m[<span class="st">"años_escolaridad"</span>],<span class="dv">1</span>)</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="co">#armamos el gráfico</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">10</span>))</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>m.plot(column<span class="op">=</span><span class="st">"años_escolaridad"</span>,legend<span class="op">=</span><span class="va">True</span>,cmap<span class="op">=</span><span class="st">"rocket"</span>,</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>             legend_kwds<span class="op">=</span>{<span class="st">'label'</span>: <span class="st">""</span>},ax<span class="op">=</span>ax)</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="co">#genero una nueva variable con las coordenadas para poder agregar etiquetas en el centro geográfico de cada comuna</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>m[<span class="st">'coords'</span>] <span class="op">=</span> m[<span class="st">'geometry'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.representative_point().coords[:])</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>m[<span class="st">'coords'</span>] <span class="op">=</span> [coords[<span class="dv">0</span>] <span class="cf">for</span> coords <span class="kw">in</span> m[<span class="st">'coords'</span>]]</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx, row <span class="kw">in</span> m.iterrows():</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>    plt.annotate(row[<span class="st">'años_escolaridad'</span>], xy<span class="op">=</span>row[<span class="st">'coords'</span>],</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>                 horizontalalignment<span class="op">=</span><span class="st">'center'</span>,size<span class="op">=</span><span class="dv">13</span>,color<span class="op">=</span><span class="st">"g"</span>)</span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a><span class="co">#Título y etiquetas de variables    </span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Años de escolaridad</span><span class="ch">\n</span><span class="st">por comuna"</span>)</span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>ax.get_xaxis().set_visible(<span class="va">False</span>)</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>ax.get_yaxis().set_visible(<span class="va">False</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-31-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Lo que podemos observar en los últimos dos gráficos es una clara división geográfica del nivel educativo:</p>
<ul>
<li>Las comunas del norte son las que tienen mayor nivel educativo</li>
<li>Las comunas del centro tienen niveles medios</li>
<li>Las comunas del sur (con las comuna 6 en el centro de la ciudad como outlier) y la comuna 1 en el este son las que tienen niveles más bajos</li>
</ul>
</section>
</section>
<section id="análisis-multivariado" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="análisis-multivariado"><span class="header-section-number">4.3</span> Análisis multivariado</h2>
<p>Probamos de cruzar años de escolaridad, nivel máximo educativo y los ingresos totales.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:8317,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828693142,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="29e522b6-3094-40ee-fd4f-c15bcb9ca94b" data-execution_count="484">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>a<span class="op">=</span>sns.jointplot(data<span class="op">=</span>df, y<span class="op">=</span><span class="st">"ingresos_totales"</span>, x<span class="op">=</span><span class="st">"años_escolaridad"</span>, hue<span class="op">=</span><span class="st">'Target'</span>,   height<span class="op">=</span><span class="dv">8</span>, ratio<span class="op">=</span><span class="dv">2</span>, marginal_ticks<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>a.fig.suptitle(<span class="st">"Años escolaridad e ingresos totales"</span>, fontsize<span class="op">=</span><span class="dv">17</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-32-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Conclusiones de la visualización: * Hasta los 6 años, como era esperable, todos los casos llegan al nivel inicial. * Vemos dos años en que aparece el primario completo: 7 y 12 años. Estimamos que se debe a la división entre los que comenzaro su educación en la primaria y los que comenzaron en el nivel inicial. * A partir de los 12 años vemos un aumento consistente de los ingresos totales.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:5546,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828698685,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="61aef3d3-3ba6-44c8-dfbe-3e0c50434bf1" data-execution_count="485">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">27</span>,<span class="dv">8</span>),ncols<span class="op">=</span><span class="dv">3</span>,sharey<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n,i <span class="kw">in</span> <span class="bu">enumerate</span>([<span class="st">'ingresos_familiares'</span>,<span class="st">'ingresos_totales'</span>,<span class="st">'ing_per_cap_familiar'</span>]):</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  sns.violinplot(data<span class="op">=</span>df,x<span class="op">=</span>i,hue<span class="op">=</span><span class="st">'dominio'</span>,y<span class="op">=</span><span class="st">'Target'</span>,ax<span class="op">=</span>ax[n])</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  ax[n].set_ylabel(<span class="st">""</span>)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  ax[n].set_xlabel(etiquetas[i])</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_title(<span class="st">"Ingresos familiares por el nivel máximo educativo y el dominio"</span>,size<span class="op">=</span><span class="dv">20</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-33-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>¿Y si sacamos los outliers?</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:9214,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828707888,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="c4c921dd-f03a-445b-e424-5df00f5a3f29" data-execution_count="486">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">27</span>,<span class="dv">18</span>),ncols<span class="op">=</span><span class="dv">3</span>,sharey<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n,i <span class="kw">in</span> <span class="bu">enumerate</span>([<span class="st">'ingresos_familiares'</span>,<span class="st">'ingresos_totales'</span>,<span class="st">'ing_per_cap_familiar'</span>]):</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  sns.violinplot(data<span class="op">=</span>df[df[i]<span class="op">&lt;</span>df[i].describe()[<span class="st">'75%'</span>]],x<span class="op">=</span>i,hue<span class="op">=</span><span class="st">'dominio'</span>,y<span class="op">=</span><span class="st">'Target'</span>,ax<span class="op">=</span>ax[n])</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  ax[n].set_ylabel(<span class="st">""</span>)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  ax[n].set_xlabel(etiquetas[i])</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_title(<span class="st">"Ingresos familiares por el nivel máximo educativo y el dominio"</span>,size<span class="op">=</span><span class="dv">20</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-34-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Aquí obtuvimos un descubrimiento interesante: no importa el nivel máximo educativo, los casos que no provienen de villas de emergencia (dominio=“villas_de_emergencia”) obtienen en promedio ingresos más altos en todos los niveles educativos. El alcanzar estudios superiores no parece homogeneizar ambos conjuntos. Esto se puede observar en el segundo gráfico, ya que el violín naranja acumula mayor cantidad de casos hacia la derecha, en comparación con los violines azules que tienen una mayor distribución.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:5909,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828713794,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="43da1041-957a-452d-fc92-76357ea39aba" data-execution_count="487">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Unimos ambos datasets</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> df.groupby([<span class="st">"comuna"</span>,<span class="st">'Target'</span>]).agg({<span class="st">'ingresos_familiares'</span>:<span class="st">"median"</span>}).reset_index() <span class="co">#Tomamos la mediana de los ingresos familiares</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> gpd.GeoDataFrame(pd.merge(df2,comunas[[<span class="st">"COMUNAS"</span>,<span class="st">"geometry"</span>]],left_on<span class="op">=</span><span class="st">"comuna"</span>,right_on<span class="op">=</span><span class="st">"COMUNAS"</span>))</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="co">#comunas.iloc[:,0:15] = comunas.iloc[:,0:15].applymap(int)</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="co">#generamos el lienzo</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>fig , ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">10</span>),ncols<span class="op">=</span><span class="dv">2</span>,nrows<span class="op">=</span><span class="dv">2</span>,sharex<span class="op">=</span><span class="va">True</span>,sharey<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>plt.rcParams.update({<span class="st">"font.size"</span>:<span class="dv">12</span>,<span class="st">"axes.titlesize"</span>:<span class="dv">25</span>,<span class="st">"axes.labelsize"</span>:<span class="dv">15</span>, <span class="st">'font.family'</span>:<span class="st">'serif'</span>})</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mapa(variable,etiqueta,fila,columna):</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">#mapa</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>  df2[df2[<span class="st">'Target'</span>]<span class="op">==</span>variable].plot(column<span class="op">=</span><span class="st">'ingresos_familiares'</span>,</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>                                            legend<span class="op">=</span><span class="va">True</span>,cmap<span class="op">=</span><span class="st">"viridis"</span>,legend_kwds<span class="op">=</span>{<span class="st">'label'</span>: <span class="st">""</span>},ax<span class="op">=</span>ax[fila,columna])</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Título y etiquetas de variables    </span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>  ax[fila,columna].set_title(<span class="st">'Ingresos familiares</span><span class="ch">\n</span><span class="st">'</span> <span class="op">+</span> etiqueta,size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>  ax[fila,columna].get_xaxis().set_visible(<span class="va">False</span>)</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>  ax[fila,columna].get_yaxis().set_visible(<span class="va">False</span>)<span class="op">;</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>mapa(<span class="st">"superior"</span>,<span class="st">"Nivel superior"</span>,<span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>mapa(<span class="st">"sec_completo"</span>,<span class="st">"Nivel Secundario"</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>mapa(<span class="st">"prim_completo"</span>,<span class="st">"Nivel Primario"</span>,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>mapa(<span class="st">"inicial"</span>,<span class="st">"Nivel Inicial"</span>,<span class="dv">0</span>,<span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-35-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Aquí podemos observar que a medida que avanza el nivel educativo máximo se atenúan levemente las diferencias de ingresos familiares entre comunas. Queda pendiente cruzar estos datos con la edad, para saber si el hecho de incluir a menores de edad está sesgando los valores para nivel inicial, primario y secundario.</p>
</section>
</section>
<section id="modelos-analíticos" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Modelos analíticos</h1>
<p>Comenzamos transformando algunas variables para poder trabajar con los algoritmos: * recategorizando la variables “Target” en variables numéricas, * y reagrupamos la variable “comuna” por regiones para reducir la dimensionalidad.</p>
<p>Y verificamos como quedan las variables del dataset:</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:461,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828714243,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="d55603fc-6be3-41ae-e14c-372b3b00264b" data-execution_count="488">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recategorizando la variables "Target" en variables numéricas</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'Target'</span>]<span class="op">==</span><span class="st">'inicial'</span>,<span class="st">'Target'</span>]       <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'Target'</span>]<span class="op">==</span><span class="st">'prim_completo'</span>,<span class="st">'Target'</span>] <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'Target'</span>]<span class="op">==</span><span class="st">'sec_completo'</span>,<span class="st">'Target'</span>]  <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'Target'</span>]<span class="op">==</span><span class="st">'superior'</span>,<span class="st">'Target'</span>]      <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'Target'</span>]<span class="op">==</span> np.nan,<span class="st">'Target'</span>]      <span class="op">=</span> np.nan</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Reagrupamos la variable comuna por regiones para reducir la dimensionalidad</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'region'</span>] <span class="op">=</span> df[<span class="st">'comuna'</span>]</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'comuna'</span>].isin([<span class="st">'12'</span>,<span class="st">'13'</span>,<span class="st">'14'</span>,<span class="st">'2'</span>,<span class="st">'15'</span>]),<span class="st">'region'</span>] <span class="op">=</span> <span class="st">'norte'</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'comuna'</span>].isin([<span class="st">'5'</span>,<span class="st">'3'</span>,<span class="st">'1'</span>]),<span class="st">'region'</span>] <span class="op">=</span> <span class="st">'centro'</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'comuna'</span>].isin([<span class="st">'8'</span>,<span class="st">'4'</span>]),<span class="st">'region'</span>] <span class="op">=</span> <span class="st">'sur'</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'comuna'</span>].isin([<span class="st">'6'</span>,<span class="st">'7'</span>,<span class="st">'9'</span>,<span class="st">'10'</span>,<span class="st">'11'</span>]),<span class="st">'region'</span>] <span class="op">=</span> <span class="st">'oeste'</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 14319 entries, 0 to 14318
Data columns (total 33 columns):
 #   Column                       Non-Null Count  Dtype  
---  ------                       --------------  -----  
 0   id                           14319 non-null  object 
 1   nhogar                       14319 non-null  object 
 2   miembro                      14319 non-null  object 
 3   comuna                       14319 non-null  object 
 4   dominio                      14319 non-null  object 
 5   edad                         14319 non-null  int64  
 6   sexo                         14319 non-null  object 
 7   parentesco_jefe              14319 non-null  object 
 8   situacion_conyugal           14318 non-null  object 
 9   num_miembro_padre            14319 non-null  object 
 10  num_miembro_madre            14319 non-null  object 
 11  estado_ocupacional           14319 non-null  object 
 12  cat_ocupacional              14319 non-null  object 
 13  calidad_ingresos_lab         14319 non-null  object 
 14  ingreso_total_lab            14319 non-null  int64  
 15  calidad_ingresos_no_lab      14319 non-null  object 
 16  ingreso_total_no_lab         14319 non-null  int64  
 17  calidad_ingresos_totales     14319 non-null  object 
 18  ingresos_totales             14319 non-null  int64  
 19  calidad_ingresos_familiares  14319 non-null  object 
 20  ingresos_familiares          14319 non-null  int64  
 21  ing_per_cap_familiar         14319 non-null  int64  
 22  estado_educativo             14319 non-null  object 
 23  sector_educativo             14316 non-null  object 
 24  nivel_actual                 14319 non-null  object 
 25  nivel_max_educativo          13265 non-null  object 
 26  años_escolaridad             14257 non-null  float64
 27  lugar_nacimiento             14318 non-null  object 
 28  afiliacion_salud             14315 non-null  object 
 29  hijos_nacidos_vivos          6535 non-null   object 
 30  cant_hijos_nac_vivos         14319 non-null  int64  
 31  Target                       13223 non-null  object 
 32  region                       14319 non-null  object 
dtypes: float64(1), int64(7), object(25)
memory usage: 3.6+ MB</code></pre>
</div>
</div>
<p>Y verificamos los diferentes valores de nuestra variable “Target:</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:6,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828714244,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="fdf1f08f-d90f-4da2-93cd-4a0ff237966a" data-execution_count="489">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>df.Target.unique().T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="489">
<pre><code>array([4, 3, 2, nan, 1], dtype=object)</code></pre>
</div>
</div>
<section id="tratado-de-nulos" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="tratado-de-nulos"><span class="header-section-number">5.1</span> Tratado de nulos</h2>
<p>Armamos una función para tener una lista limpia de variables con nulos, que nos da como resultado:</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:3,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828714244,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="490">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Armo una función para tener una lista limpia de variables con nulos</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> info_nulos(data:pd.DataFrame):</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    nulos <span class="op">=</span> data.isnull().<span class="bu">sum</span>().where(<span class="kw">lambda</span> x:x<span class="op">&gt;</span><span class="dv">0</span>).dropna().<span class="bu">apply</span>(<span class="bu">int</span>).sort_values()</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(nulos)<span class="op">&gt;</span><span class="dv">0</span>:</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'Variables con valores nulos:</span><span class="ch">\n\n</span><span class="sc">{</span>nulos<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>: <span class="bu">print</span>(<span class="ss">f'El dataset no tiene valores nulos'</span>)</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>info_nulos(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Variables con valores nulos:

situacion_conyugal        1
lugar_nacimiento          1
sector_educativo          3
afiliacion_salud          4
años_escolaridad         62
nivel_max_educativo    1054
Target                 1096
hijos_nacidos_vivos    7784
dtype: int64</code></pre>
</div>
</div>
<p>Entonces, para eliminar los valores nulos de la variable “años_escolaridad” reemplazamos los nulos con la mediana por comuna y sexo.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:862,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828715103,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="491">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">#reemplazo los nulos con la mediana por comuna y sexo</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co">#creo dataframe de referencia</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>anios_escol_ref_null <span class="op">=</span> df.groupby([<span class="st">'sexo'</span>, <span class="st">'comuna'</span>]).median()[<span class="st">'años_escolaridad'</span>].reset_index()</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>anios_escol_ref_null</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="co">#funcion de replace en base a dataframe agrupado</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fill_na_escol_grouped(df_grouped , row_replace):</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> pd.isna(row_replace[<span class="st">'años_escolaridad'</span>]):</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df_grouped[(df_grouped[<span class="st">'sexo'</span>] <span class="op">==</span> row_replace[<span class="st">'sexo'</span>]) <span class="op">&amp;</span> (df_grouped[<span class="st">'comuna'</span>] <span class="op">==</span> row_replace[<span class="st">'comuna'</span>])][<span class="st">'años_escolaridad'</span>].values[<span class="dv">0</span>]</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>:</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> row_replace[<span class="st">'años_escolaridad'</span>]</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a><span class="co">#transformacion de train</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'años_escolaridad'</span>] <span class="op">=</span> df.<span class="bu">apply</span>(<span class="kw">lambda</span> row: fill_na_escol_grouped(anios_escol_ref_null, row), axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="variable-remplazadas-con-moda" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="variable-remplazadas-con-moda"><span class="header-section-number">5.1.1</span> Variable remplazadas con moda</h3>
<p>A las variables: * “lugar_nacimiento”, * “situacion_conyugal”, * “afiliacion_salud”,</p>
<p>las vamos a reemplazar con la moda.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:464,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828715562,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="7678f34d-4764-492b-8c23-1f567302b0d4" data-execution_count="492">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">#variables que voy a reemplazar simplemente con la moda </span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co">#lugar_nacimiento, situacion_conyugal, afiliacion_salud</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>cols_rem_nulls <span class="op">=</span> [<span class="st">'lugar_nacimiento'</span>, <span class="st">'situacion_conyugal'</span>, <span class="st">'afiliacion_salud'</span>, <span class="st">'sector_educativo'</span>, <span class="st">'hijos_nacidos_vivos'</span>]</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>moda_variables<span class="op">=</span> df.<span class="bu">filter</span>(cols_rem_nulls).mode()</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>df[cols_rem_nulls]<span class="op">=</span>df[cols_rem_nulls].fillna(df.mode().iloc[<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Y como resultado, solo nos quedan las siguientes variables con valores nulos:</p>
<div class="cell" data-execution_count="493">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>info_nulos(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Variables con valores nulos:

nivel_max_educativo    1054
Target                 1096
dtype: int64</code></pre>
</div>
</div>
<p>Como a la variable “nivel_max_educativo” ya no la vamos a utilizar dado que contamos con la variable “Target” la eliminamos, ahora, como no es recomendable reemplazar los nulos del target del train, los eliminamos y por último transformamos nuestra variable “Target” a tipo entero.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:5,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828715562,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="494">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">#De paso elimino la columna q ya no vamos a utilizar porq tenemos el Target</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>df.drop(columns<span class="op">=</span><span class="st">'nivel_max_educativo'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="co">#como solamente quedan los nulos del target elimino en todo el train</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Paso a número entero  </span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Target'</span>]<span class="op">=</span>df.Target.astype(<span class="bu">int</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Verificamos una última vez, para mostrar que ya no tenemos nulos en nuestro dataset.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:6,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828715563,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="65b7bac3-197a-40ed-da22-70b61013f1e1" data-execution_count="495">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>info_nulos(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>El dataset no tiene valores nulos</code></pre>
</div>
</div>
</section>
</section>
<section id="target" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="target"><span class="header-section-number">5.2</span> Target</h2>
<section id="borrado-de-variables" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="borrado-de-variables"><span class="header-section-number">5.2.1</span> Borrado de variables</h3>
<p>Hay muchas variables que consideramos que no es necesario sumarlas al algoritmo de clasificacion dado que brindan información repetida o que no suma para la clasificación. A continuación se comparten las categoria que se descartarán para correr el algoritmo:</p>
<ul>
<li>id: no suma información para la clasificación,</li>
<li>nhogar: no suma información para la clasificación,</li>
<li>parentesco_jefe: no suma información para la clasificación,</li>
<li>miembro: no suma información para la clasificación,</li>
<li>num_miembro_padre: no suma información para la clasificación,</li>
<li>num_miembro_madre: no suma información para la clasificación,</li>
<li>cat_ocupacional brinda la misma información que estado_ocupacional,</li>
<li>calidad_ingresos_lab brinda la misma información que ingreso_total_lab,</li>
<li>calidad_ingresos_no_lab brinda la misma información que ingreso_total_no_lab,</li>
<li>calidad_ingresos_totales brinda la misma información que ingresos_totales,</li>
<li>calidad_ingresos_familiares brinda la misma información que ingreso_familiares,</li>
<li>estado_educativo no aporta información para la clasificación,</li>
<li>nivel_actual no aporta información para la clasificacion,</li>
<li>hijos_nacidos_vivos brinda la misma información que cant_hijos_nac_vivos,</li>
<li>comuna: variable ya abordada en la variable ‘región’.</li>
</ul>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:13,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828715935,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="496">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Hay variables que no aportan nada entonces las sacamos</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>no_var <span class="op">=</span> [<span class="st">'id'</span>,<span class="st">'nhogar'</span>, <span class="st">'miembro'</span>, <span class="st">'parentesco_jefe'</span>, <span class="st">'num_miembro_padre'</span>,</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>          <span class="st">'num_miembro_padre'</span>,<span class="st">'num_miembro_madre'</span>,<span class="st">'cat_ocupacional'</span>,</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>          <span class="st">'calidad_ingresos_lab'</span>, <span class="st">'calidad_ingresos_no_lab'</span>, </span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>          <span class="st">'calidad_ingresos_totales'</span>,<span class="st">'calidad_ingresos_familiares'</span>, </span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">'calidad_ingresos_familiares'</span>,<span class="st">'hijos_nacidos_vivos'</span>,</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>          <span class="st">'estado_educativo'</span>,<span class="st">'comuna'</span>,<span class="st">'nivel_actual'</span>]</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>df.drop(axis<span class="op">=</span><span class="dv">1</span>, columns<span class="op">=</span>no_var, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="división-de-train-y-test" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="división-de-train-y-test"><span class="header-section-number">5.3</span> División de train y test</h2>
<p>En primer lugar, hacemos la división entre test y el train en un 30% y un 70% respectivamente, con una semilla especifica.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:12,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828715936,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="497">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="co">#creo un dataset train y otro test 70-30 %%</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>train, test <span class="op">=</span> train_test_split(df, test_size <span class="op">=</span> <span class="fl">0.30</span>,random_state<span class="op">=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="train" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="train"><span class="header-section-number">5.3.1</span> Train</h3>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:10,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828715936,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="83d8d7f8-cc8a-4c2d-dd5d-0efb6dece51c" data-execution_count="498">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>train.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="498">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>dominio</th>
      <th>edad</th>
      <th>sexo</th>
      <th>situacion_conyugal</th>
      <th>estado_ocupacional</th>
      <th>ingreso_total_lab</th>
      <th>ingreso_total_no_lab</th>
      <th>ingresos_totales</th>
      <th>ingresos_familiares</th>
      <th>ing_per_cap_familiar</th>
      <th>sector_educativo</th>
      <th>años_escolaridad</th>
      <th>lugar_nacimiento</th>
      <th>afiliacion_salud</th>
      <th>cant_hijos_nac_vivos</th>
      <th>Target</th>
      <th>region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>13112</th>
      <td>Resto de la Ciudad</td>
      <td>75</td>
      <td>Varon</td>
      <td>Casado/a</td>
      <td>Ocupado</td>
      <td>30000</td>
      <td>12000</td>
      <td>42000</td>
      <td>54000</td>
      <td>27000</td>
      <td>No corresponde</td>
      <td>9.0</td>
      <td>CABA</td>
      <td>Otros</td>
      <td>0</td>
      <td>3</td>
      <td>oeste</td>
    </tr>
    <tr>
      <th>4601</th>
      <td>Resto de la Ciudad</td>
      <td>41</td>
      <td>Varon</td>
      <td>Unido/a</td>
      <td>Ocupado</td>
      <td>26000</td>
      <td>0</td>
      <td>26000</td>
      <td>41000</td>
      <td>13667</td>
      <td>No corresponde</td>
      <td>14.0</td>
      <td>CABA</td>
      <td>Solo obra social</td>
      <td>0</td>
      <td>4</td>
      <td>sur</td>
    </tr>
    <tr>
      <th>3102</th>
      <td>Resto de la Ciudad</td>
      <td>17</td>
      <td>Varon</td>
      <td>Soltero/a</td>
      <td>Inactivo</td>
      <td>0</td>
      <td>1600</td>
      <td>1600</td>
      <td>16600</td>
      <td>3320</td>
      <td>Estatal/publico</td>
      <td>8.0</td>
      <td>CABA</td>
      <td>Solo sistema publico</td>
      <td>0</td>
      <td>3</td>
      <td>sur</td>
    </tr>
    <tr>
      <th>10356</th>
      <td>Resto de la Ciudad</td>
      <td>29</td>
      <td>Varon</td>
      <td>Unido/a</td>
      <td>Ocupado</td>
      <td>15000</td>
      <td>0</td>
      <td>15000</td>
      <td>27000</td>
      <td>5400</td>
      <td>No corresponde</td>
      <td>12.0</td>
      <td>CABA</td>
      <td>Solo prepaga o mutual via OS</td>
      <td>0</td>
      <td>2</td>
      <td>oeste</td>
    </tr>
    <tr>
      <th>13819</th>
      <td>Resto de la Ciudad</td>
      <td>89</td>
      <td>Mujer</td>
      <td>Unido/a</td>
      <td>Inactivo</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>30000</td>
      <td>15000</td>
      <td>No corresponde</td>
      <td>12.0</td>
      <td>CABA</td>
      <td>Solo plan de medicina prepaga por contratación...</td>
      <td>0</td>
      <td>2</td>
      <td>centro</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:9,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828715937,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="8b886682-81fd-4e54-d6d0-86318c6956b6" data-execution_count="499">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>train.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 9256 entries, 13112 to 6444
Data columns (total 17 columns):
 #   Column                Non-Null Count  Dtype  
---  ------                --------------  -----  
 0   dominio               9256 non-null   object 
 1   edad                  9256 non-null   int64  
 2   sexo                  9256 non-null   object 
 3   situacion_conyugal    9256 non-null   object 
 4   estado_ocupacional    9256 non-null   object 
 5   ingreso_total_lab     9256 non-null   int64  
 6   ingreso_total_no_lab  9256 non-null   int64  
 7   ingresos_totales      9256 non-null   int64  
 8   ingresos_familiares   9256 non-null   int64  
 9   ing_per_cap_familiar  9256 non-null   int64  
 10  sector_educativo      9256 non-null   object 
 11  años_escolaridad      9256 non-null   float64
 12  lugar_nacimiento      9256 non-null   object 
 13  afiliacion_salud      9256 non-null   object 
 14  cant_hijos_nac_vivos  9256 non-null   int64  
 15  Target                9256 non-null   int32  
 16  region                9256 non-null   object 
dtypes: float64(1), int32(1), int64(7), object(8)
memory usage: 1.2+ MB</code></pre>
</div>
</div>
<section id="one-hot-encoding" class="level4" data-number="5.3.1.1">
<h4 data-number="5.3.1.1" class="anchored" data-anchor-id="one-hot-encoding"><span class="header-section-number">5.3.1.1</span> One Hot Encoding</h4>
<p>Aplicamos one hot encoding al train sobre las categorias:</p>
<ul>
<li>“region”,</li>
<li>“situacion_conyugal”</li>
<li>“sector_educativo”,</li>
<li>“estado_ocupacional”,</li>
<li>“afiliacion_salud”,</li>
<li>“lugar_nacimiento”,</li>
<li>“sexo”,</li>
<li>“dominio”.</li>
</ul>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:437,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828716369,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="ba6e0581-f7b0-4faa-97ec-672cff7072b3" data-execution_count="500">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> OneHotEncoder</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>encoder <span class="op">=</span> OneHotEncoder(handle_unknown<span class="op">=</span><span class="st">'ignore'</span>, <span class="co">#ponemos ignore para poder ommitir cuando puede pasar que no exista los mismos valores </span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>                        sparse<span class="op">=</span><span class="va">False</span>) <span class="co"># generarlo como. matrix para poder generar las columnas adecuadas</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Variables que pasaremos al encoding</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>categoricas <span class="op">=</span> [<span class="st">'region'</span>, <span class="st">'situacion_conyugal'</span>, <span class="st">'sector_educativo'</span>,</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>                <span class="st">'estado_ocupacional'</span>,<span class="st">'afiliacion_salud'</span>,<span class="st">'lugar_nacimiento'</span>,<span class="st">'sexo'</span>,<span class="st">'dominio'</span>]</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Hay muchas variables categoricas que transformar </span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="co">#entrenamiento para genera el preprocesamiento one hot encoding para las variables indicadas</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>encoder.fit(train[categoricas])</span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a><span class="co">#transformo en train datasets en base a la clase generada</span></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>cat_encoding <span class="op">=</span> pd.DataFrame(encoder.transform(train[categoricas]), </span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>                            columns<span class="op">=</span>encoder.get_feature_names(categoricas))</span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>cat_encoding.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\JMC\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\utils\deprecation.py:87: FutureWarning: Function get_feature_names is deprecated; get_feature_names is deprecated in 1.0 and will be removed in 1.2. Please use get_feature_names_out instead.
  warnings.warn(msg, category=FutureWarning)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="500">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>region_centro</th>
      <th>region_norte</th>
      <th>region_oeste</th>
      <th>region_sur</th>
      <th>situacion_conyugal_Casado/a</th>
      <th>situacion_conyugal_Divorciado/a</th>
      <th>situacion_conyugal_No corresponde</th>
      <th>situacion_conyugal_Separado/a de unión o matrimonio</th>
      <th>situacion_conyugal_Soltero/a</th>
      <th>situacion_conyugal_Unido/a</th>
      <th>...</th>
      <th>lugar_nacimiento_Otra provincia</th>
      <th>lugar_nacimiento_PBA excepto GBA</th>
      <th>lugar_nacimiento_PBA sin especificar</th>
      <th>lugar_nacimiento_Pais limitrofe</th>
      <th>lugar_nacimiento_Pais no limitrofe</th>
      <th>lugar_nacimiento_Partido GBA</th>
      <th>sexo_Mujer</th>
      <th>sexo_Varon</th>
      <th>dominio_Resto de la Ciudad</th>
      <th>dominio_Villas de emergencia</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 34 columns</p>
</div>
</div>
</div>
<p>Luego juntamos las variables que nos interesan con las cetegóricas encoding y por último eliminamos las categórias sin el encoding.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:6,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828716369,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="501">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co">#joineo de las variables que deseo con categoricas encoding</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>df_all_train <span class="op">=</span> pd.concat([train, cat_encoding], axis<span class="op">=</span><span class="dv">1</span>, join<span class="op">=</span><span class="st">'inner'</span>)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>df_all_train.drop(categoricas,axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:7,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828716370,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="9331acc0-9661-464c-ab3e-eccb5a90d826" data-execution_count="502">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>cat_encoding.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 9256 entries, 0 to 9255
Data columns (total 34 columns):
 #   Column                                                                      Non-Null Count  Dtype  
---  ------                                                                      --------------  -----  
 0   region_centro                                                               9256 non-null   float64
 1   region_norte                                                                9256 non-null   float64
 2   region_oeste                                                                9256 non-null   float64
 3   region_sur                                                                  9256 non-null   float64
 4   situacion_conyugal_Casado/a                                                 9256 non-null   float64
 5   situacion_conyugal_Divorciado/a                                             9256 non-null   float64
 6   situacion_conyugal_No corresponde                                           9256 non-null   float64
 7   situacion_conyugal_Separado/a de unión o matrimonio                         9256 non-null   float64
 8   situacion_conyugal_Soltero/a                                                9256 non-null   float64
 9   situacion_conyugal_Unido/a                                                  9256 non-null   float64
 10  situacion_conyugal_Viudo/a                                                  9256 non-null   float64
 11  sector_educativo_Estatal/publico                                            9256 non-null   float64
 12  sector_educativo_No corresponde                                             9256 non-null   float64
 13  sector_educativo_Privado no religioso                                       9256 non-null   float64
 14  sector_educativo_Privado religioso                                          9256 non-null   float64
 15  estado_ocupacional_Desocupado                                               9256 non-null   float64
 16  estado_ocupacional_Inactivo                                                 9256 non-null   float64
 17  estado_ocupacional_Ocupado                                                  9256 non-null   float64
 18  afiliacion_salud_Otros                                                      9256 non-null   float64
 19  afiliacion_salud_Solo obra social                                           9256 non-null   float64
 20  afiliacion_salud_Solo plan de medicina prepaga por contratación voluntaria  9256 non-null   float64
 21  afiliacion_salud_Solo prepaga o mutual via OS                               9256 non-null   float64
 22  afiliacion_salud_Solo sistema publico                                       9256 non-null   float64
 23  lugar_nacimiento_CABA                                                       9256 non-null   float64
 24  lugar_nacimiento_Otra provincia                                             9256 non-null   float64
 25  lugar_nacimiento_PBA excepto GBA                                            9256 non-null   float64
 26  lugar_nacimiento_PBA sin especificar                                        9256 non-null   float64
 27  lugar_nacimiento_Pais limitrofe                                             9256 non-null   float64
 28  lugar_nacimiento_Pais no limitrofe                                          9256 non-null   float64
 29  lugar_nacimiento_Partido GBA                                                9256 non-null   float64
 30  sexo_Mujer                                                                  9256 non-null   float64
 31  sexo_Varon                                                                  9256 non-null   float64
 32  dominio_Resto de la Ciudad                                                  9256 non-null   float64
 33  dominio_Villas de emergencia                                                9256 non-null   float64
dtypes: float64(34)
memory usage: 2.4 MB</code></pre>
</div>
</div>
<p>Por último renombramos algunas variables para que sean más cortas: * “afiliacion_salud_Solo obra social”: “afiliacion_salud_solo_o_social”, * “afiliacion_salud_Solo plan de medicina prepaga por contratación voluntaria” : “afiliacion_salud_solo_prepaga”, * “afiliacion_salud_Solo prepaga o mutual via OS” : “afiliacion_salud_solo_prepaga_o_mutual”, * “afiliacion_Solo sistema publico”: “afiliacion_salud_solo_sist_pub”, * “situacion_conyugal_Separado/a de unión o matrimonio”: “situacion_conyugal_separado”.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:5,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828716370,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="503">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Por último renombramos algunas variables para que sean más cortas</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>df_all_train.rename(columns <span class="op">=</span> </span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>{<span class="st">'afiliacion_salud_Solo obra social'</span>: <span class="st">'afiliacion_salud_solo_o_social'</span>,</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="st">'afiliacion_salud_Solo plan de medicina prepaga por contratación voluntaria'</span> : <span class="st">"afiliacion_salud_solo_prepaga"</span>,</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="st">'afiliacion_salud_Solo prepaga o mutual via OS'</span> : <span class="st">'afiliacion_salud_solo_prepaga_o_mutual'</span>,</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="st">'afiliacion_Solo sistema publico'</span>: <span class="st">'afiliacion_salud_solo_sist_pub'</span>,</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="st">'situacion_conyugal_Separado/a de unión o matrimonio'</span>: <span class="st">'situacion_conyugal_separado'</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>},inplace <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="división-de-x-e-y" class="level4" data-number="5.3.1.2">
<h4 data-number="5.3.1.2" class="anchored" data-anchor-id="división-de-x-e-y"><span class="header-section-number">5.3.1.2</span> División de X e Y</h4>
<p>Ahora, spliteamos los datos en target y features para el train.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:394,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828716760,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="fe55516b-74c9-413f-d260-8491aa950c01" data-execution_count="504">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">#spliteo de datos en target y features for test and train</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="co">#seleccion de x values sin el target</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>X_train <span class="op">=</span> df_all_train.loc[:,df_all_train.columns <span class="op">!=</span> <span class="st">'Target'</span>]</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="co">#seleccion del target</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>y_train <span class="op">=</span> df_all_train.Target</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>y_train</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>X_train.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="504">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>edad</th>
      <th>ingreso_total_lab</th>
      <th>ingreso_total_no_lab</th>
      <th>ingresos_totales</th>
      <th>ingresos_familiares</th>
      <th>ing_per_cap_familiar</th>
      <th>años_escolaridad</th>
      <th>cant_hijos_nac_vivos</th>
      <th>region_centro</th>
      <th>region_norte</th>
      <th>...</th>
      <th>lugar_nacimiento_Otra provincia</th>
      <th>lugar_nacimiento_PBA excepto GBA</th>
      <th>lugar_nacimiento_PBA sin especificar</th>
      <th>lugar_nacimiento_Pais limitrofe</th>
      <th>lugar_nacimiento_Pais no limitrofe</th>
      <th>lugar_nacimiento_Partido GBA</th>
      <th>sexo_Mujer</th>
      <th>sexo_Varon</th>
      <th>dominio_Resto de la Ciudad</th>
      <th>dominio_Villas de emergencia</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>4601</th>
      <td>41</td>
      <td>26000</td>
      <td>0</td>
      <td>26000</td>
      <td>41000</td>
      <td>13667</td>
      <td>14.0</td>
      <td>0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3102</th>
      <td>17</td>
      <td>0</td>
      <td>1600</td>
      <td>1600</td>
      <td>16600</td>
      <td>3320</td>
      <td>8.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>8552</th>
      <td>53</td>
      <td>12000</td>
      <td>0</td>
      <td>12000</td>
      <td>12000</td>
      <td>12000</td>
      <td>15.0</td>
      <td>0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4693</th>
      <td>41</td>
      <td>75000</td>
      <td>0</td>
      <td>75000</td>
      <td>135000</td>
      <td>33750</td>
      <td>15.0</td>
      <td>2</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2365</th>
      <td>36</td>
      <td>30000</td>
      <td>0</td>
      <td>30000</td>
      <td>30000</td>
      <td>7500</td>
      <td>15.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 42 columns</p>
</div>
</div>
</div>
</section>
</section>
<section id="test" class="level3" data-number="5.3.2">
<h3 data-number="5.3.2" class="anchored" data-anchor-id="test"><span class="header-section-number">5.3.2</span> Test</h3>
<section id="one-hot-encoding-1" class="level4" data-number="5.3.2.1">
<h4 data-number="5.3.2.1" class="anchored" data-anchor-id="one-hot-encoding-1"><span class="header-section-number">5.3.2.1</span> One Hot Encoding</h4>
<p>Repetimos el ecoding que hicimos anteriormente para el train, pero ahora para el test.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:8,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828716760,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="45268df4-c391-400a-c2de-94d0ee6bd83c" data-execution_count="505">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">#la primera parte del encoding ya esta hecha</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>cat_encoding_test <span class="op">=</span> pd.DataFrame(encoder.transform(test[categoricas]), </span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>                            columns<span class="op">=</span>encoder.get_feature_names(categoricas))</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>cat_encoding_test.head()</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a><span class="co">#joineo de las variables que deseo con categoricas encoding</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>df_all_test <span class="op">=</span> pd.concat([test, cat_encoding], axis<span class="op">=</span><span class="dv">1</span>, join<span class="op">=</span><span class="st">'inner'</span>)</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>df_all_test.drop(categoricas,axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\JMC\AppData\Local\Programs\Python\Python310\lib\site-packages\sklearn\utils\deprecation.py:87: FutureWarning: Function get_feature_names is deprecated; get_feature_names is deprecated in 1.0 and will be removed in 1.2. Please use get_feature_names_out instead.
  warnings.warn(msg, category=FutureWarning)</code></pre>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:7,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828716761,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="558466b5-422b-429d-91d6-28b16c3f6a21" data-execution_count="506">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>df_all_test.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 2473 entries, 6879 to 5518
Data columns (total 43 columns):
 #   Column                                                                      Non-Null Count  Dtype  
---  ------                                                                      --------------  -----  
 0   edad                                                                        2473 non-null   int64  
 1   ingreso_total_lab                                                           2473 non-null   int64  
 2   ingreso_total_no_lab                                                        2473 non-null   int64  
 3   ingresos_totales                                                            2473 non-null   int64  
 4   ingresos_familiares                                                         2473 non-null   int64  
 5   ing_per_cap_familiar                                                        2473 non-null   int64  
 6   años_escolaridad                                                            2473 non-null   float64
 7   cant_hijos_nac_vivos                                                        2473 non-null   int64  
 8   Target                                                                      2473 non-null   int32  
 9   region_centro                                                               2473 non-null   float64
 10  region_norte                                                                2473 non-null   float64
 11  region_oeste                                                                2473 non-null   float64
 12  region_sur                                                                  2473 non-null   float64
 13  situacion_conyugal_Casado/a                                                 2473 non-null   float64
 14  situacion_conyugal_Divorciado/a                                             2473 non-null   float64
 15  situacion_conyugal_No corresponde                                           2473 non-null   float64
 16  situacion_conyugal_Separado/a de unión o matrimonio                         2473 non-null   float64
 17  situacion_conyugal_Soltero/a                                                2473 non-null   float64
 18  situacion_conyugal_Unido/a                                                  2473 non-null   float64
 19  situacion_conyugal_Viudo/a                                                  2473 non-null   float64
 20  sector_educativo_Estatal/publico                                            2473 non-null   float64
 21  sector_educativo_No corresponde                                             2473 non-null   float64
 22  sector_educativo_Privado no religioso                                       2473 non-null   float64
 23  sector_educativo_Privado religioso                                          2473 non-null   float64
 24  estado_ocupacional_Desocupado                                               2473 non-null   float64
 25  estado_ocupacional_Inactivo                                                 2473 non-null   float64
 26  estado_ocupacional_Ocupado                                                  2473 non-null   float64
 27  afiliacion_salud_Otros                                                      2473 non-null   float64
 28  afiliacion_salud_Solo obra social                                           2473 non-null   float64
 29  afiliacion_salud_Solo plan de medicina prepaga por contratación voluntaria  2473 non-null   float64
 30  afiliacion_salud_Solo prepaga o mutual via OS                               2473 non-null   float64
 31  afiliacion_salud_Solo sistema publico                                       2473 non-null   float64
 32  lugar_nacimiento_CABA                                                       2473 non-null   float64
 33  lugar_nacimiento_Otra provincia                                             2473 non-null   float64
 34  lugar_nacimiento_PBA excepto GBA                                            2473 non-null   float64
 35  lugar_nacimiento_PBA sin especificar                                        2473 non-null   float64
 36  lugar_nacimiento_Pais limitrofe                                             2473 non-null   float64
 37  lugar_nacimiento_Pais no limitrofe                                          2473 non-null   float64
 38  lugar_nacimiento_Partido GBA                                                2473 non-null   float64
 39  sexo_Mujer                                                                  2473 non-null   float64
 40  sexo_Varon                                                                  2473 non-null   float64
 41  dominio_Resto de la Ciudad                                                  2473 non-null   float64
 42  dominio_Villas de emergencia                                                2473 non-null   float64
dtypes: float64(35), int32(1), int64(7)
memory usage: 840.4 KB</code></pre>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:399,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828717155,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="507">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co">#renombramos algunas variables muy largas</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Por último renombramos algunas variables para que sean más cortas</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>df_all_test.rename(columns <span class="op">=</span> </span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>{<span class="st">'afiliacion_salud_Solo obra social'</span>: <span class="st">'afiliacion_salud_solo_o_social'</span>,</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">'afiliacion_salud_Solo plan de medicina prepaga por contratación voluntaria'</span> : <span class="st">"afiliacion_salud_solo_prepaga"</span>,</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">'afiliacion_salud_Solo prepaga o mutual via OS'</span> : <span class="st">'afiliacion_salud_solo_prepaga_o_mutual'</span>,</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">'afiliacion_Solo sistema publico'</span>: <span class="st">'afiliacion_salud_solo_sist_pub'</span>,</span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">'situacion_conyugal_Separado/a de unión o matrimonio'</span>: <span class="st">'situacion_conyugal_separado'</span>},</span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>  inplace <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="división-de-x-e-y-1" class="level4" data-number="5.3.2.2">
<h4 data-number="5.3.2.2" class="anchored" data-anchor-id="división-de-x-e-y-1"><span class="header-section-number">5.3.2.2</span> División de X e Y</h4>
<p>Ahora, spliteamos los datos en target y features para el test.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:8,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828717156,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="508">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># spliteo de datos y target del test</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>X_test <span class="op">=</span> df_all_test.loc[:,df_all_test.columns <span class="op">!=</span> <span class="st">'Target'</span>] </span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>y_test <span class="op">=</span> df_all_test.Target</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:8,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828717157,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="3d4bb1af-d502-48f2-96a8-e74fd757a097" data-execution_count="509">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>X_test.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="509">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>edad</th>
      <th>ingreso_total_lab</th>
      <th>ingreso_total_no_lab</th>
      <th>ingresos_totales</th>
      <th>ingresos_familiares</th>
      <th>ing_per_cap_familiar</th>
      <th>años_escolaridad</th>
      <th>cant_hijos_nac_vivos</th>
      <th>region_centro</th>
      <th>region_norte</th>
      <th>...</th>
      <th>lugar_nacimiento_Otra provincia</th>
      <th>lugar_nacimiento_PBA excepto GBA</th>
      <th>lugar_nacimiento_PBA sin especificar</th>
      <th>lugar_nacimiento_Pais limitrofe</th>
      <th>lugar_nacimiento_Pais no limitrofe</th>
      <th>lugar_nacimiento_Partido GBA</th>
      <th>sexo_Mujer</th>
      <th>sexo_Varon</th>
      <th>dominio_Resto de la Ciudad</th>
      <th>dominio_Villas de emergencia</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>6879</th>
      <td>9</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>90000</td>
      <td>30000</td>
      <td>3.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>5580</th>
      <td>16</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>68000</td>
      <td>11333</td>
      <td>9.0</td>
      <td>0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>7204</th>
      <td>51</td>
      <td>150000</td>
      <td>0</td>
      <td>150000</td>
      <td>396000</td>
      <td>132000</td>
      <td>19.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>6982</th>
      <td>48</td>
      <td>10000</td>
      <td>4000</td>
      <td>14000</td>
      <td>14000</td>
      <td>3500</td>
      <td>12.0</td>
      <td>3</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>6636</th>
      <td>49</td>
      <td>50000</td>
      <td>0</td>
      <td>50000</td>
      <td>72600</td>
      <td>24200</td>
      <td>12.0</td>
      <td>1</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 42 columns</p>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="árbol-de-decisión" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="árbol-de-decisión"><span class="header-section-number">5.4</span> Árbol de decisión</h2>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:440,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828717590,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="5cc9094c-f6a8-46aa-a75d-7a022d2c6856" data-execution_count="510">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co">#training del modelo</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> tree</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>model_default <span class="op">=</span> tree.DecisionTreeClassifier(random_state <span class="op">=</span> <span class="dv">50</span>) <span class="co"># con hiperparametros default</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>model_default.fit(X_train, y_train)</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a><span class="co">#modelo generado con algun hiperparamtros diferente</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>model_max_depth <span class="op">=</span> tree.DecisionTreeClassifier(random_state <span class="op">=</span> <span class="dv">50</span>, max_depth<span class="op">=</span><span class="dv">10</span>) </span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>model_max_depth.fit(X_train, y_train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="510">
<style>#sk-container-id-16 {color: black;background-color: white;}#sk-container-id-16 pre{padding: 0;}#sk-container-id-16 div.sk-toggleable {background-color: white;}#sk-container-id-16 label.sk-toggleable__label {cursor: pointer;display: block;width: 100%;margin-bottom: 0;padding: 0.3em;box-sizing: border-box;text-align: center;}#sk-container-id-16 label.sk-toggleable__label-arrow:before {content: "▸";float: left;margin-right: 0.25em;color: #696969;}#sk-container-id-16 label.sk-toggleable__label-arrow:hover:before {color: black;}#sk-container-id-16 div.sk-estimator:hover label.sk-toggleable__label-arrow:before {color: black;}#sk-container-id-16 div.sk-toggleable__content {max-height: 0;max-width: 0;overflow: hidden;text-align: left;background-color: #f0f8ff;}#sk-container-id-16 div.sk-toggleable__content pre {margin: 0.2em;color: black;border-radius: 0.25em;background-color: #f0f8ff;}#sk-container-id-16 input.sk-toggleable__control:checked~div.sk-toggleable__content {max-height: 200px;max-width: 100%;overflow: auto;}#sk-container-id-16 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {content: "▾";}#sk-container-id-16 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-16 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-16 input.sk-hidden--visually {border: 0;clip: rect(1px 1px 1px 1px);clip: rect(1px, 1px, 1px, 1px);height: 1px;margin: -1px;overflow: hidden;padding: 0;position: absolute;width: 1px;}#sk-container-id-16 div.sk-estimator {font-family: monospace;background-color: #f0f8ff;border: 1px dotted black;border-radius: 0.25em;box-sizing: border-box;margin-bottom: 0.5em;}#sk-container-id-16 div.sk-estimator:hover {background-color: #d4ebff;}#sk-container-id-16 div.sk-parallel-item::after {content: "";width: 100%;border-bottom: 1px solid gray;flex-grow: 1;}#sk-container-id-16 div.sk-label:hover label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-16 div.sk-serial::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: 0;}#sk-container-id-16 div.sk-serial {display: flex;flex-direction: column;align-items: center;background-color: white;padding-right: 0.2em;padding-left: 0.2em;position: relative;}#sk-container-id-16 div.sk-item {position: relative;z-index: 1;}#sk-container-id-16 div.sk-parallel {display: flex;align-items: stretch;justify-content: center;background-color: white;position: relative;}#sk-container-id-16 div.sk-item::before, #sk-container-id-16 div.sk-parallel-item::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: -1;}#sk-container-id-16 div.sk-parallel-item {display: flex;flex-direction: column;z-index: 1;position: relative;background-color: white;}#sk-container-id-16 div.sk-parallel-item:first-child::after {align-self: flex-end;width: 50%;}#sk-container-id-16 div.sk-parallel-item:last-child::after {align-self: flex-start;width: 50%;}#sk-container-id-16 div.sk-parallel-item:only-child::after {width: 0;}#sk-container-id-16 div.sk-dashed-wrapped {border: 1px dashed gray;margin: 0 0.4em 0.5em 0.4em;box-sizing: border-box;padding-bottom: 0.4em;background-color: white;}#sk-container-id-16 div.sk-label label {font-family: monospace;font-weight: bold;display: inline-block;line-height: 1.2em;}#sk-container-id-16 div.sk-label-container {text-align: center;}#sk-container-id-16 div.sk-container {/* jupyter's `normalize.less` sets `[hidden] { display: none; }` but bootstrap.min.css set `[hidden] { display: none !important; }` so we also need the `!important` here to be able to override the default hidden behavior on the sphinx rendered scikit-learn.org. See: https://github.com/scikit-learn/scikit-learn/issues/21755 */display: inline-block !important;position: relative;}#sk-container-id-16 div.sk-text-repr-fallback {display: none;}</style><div id="sk-container-id-16" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>DecisionTreeClassifier(max_depth=10, random_state=50)</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br>On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden=""><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-16" type="checkbox" checked=""><label for="sk-estimator-id-16" class="sk-toggleable__label sk-toggleable__label-arrow">DecisionTreeClassifier</label><div class="sk-toggleable__content"><pre>DecisionTreeClassifier(max_depth=10, random_state=50)</pre></div></div></div></div></div>
</div>
</div>
<section id="prueba" class="level3" data-number="5.4.1">
<h3 data-number="5.4.1" class="anchored" data-anchor-id="prueba"><span class="header-section-number">5.4.1</span> Prueba</h3>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:17,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828717591,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="511">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co">#prediccion</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>y_pred_test <span class="op">=</span> model_max_depth.predict(X_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:16,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828717591,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="a783c05d-f936-4df6-ea0a-7d5cd09fbd6e" data-execution_count="512">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co">#prediccion</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>X_test[<span class="st">'pred'</span>] <span class="op">=</span> y_pred_test</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>X_test[<span class="st">'Target'</span>] <span class="op">=</span> y_test</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>X_test.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="512">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>edad</th>
      <th>ingreso_total_lab</th>
      <th>ingreso_total_no_lab</th>
      <th>ingresos_totales</th>
      <th>ingresos_familiares</th>
      <th>ing_per_cap_familiar</th>
      <th>años_escolaridad</th>
      <th>cant_hijos_nac_vivos</th>
      <th>region_centro</th>
      <th>region_norte</th>
      <th>...</th>
      <th>lugar_nacimiento_PBA sin especificar</th>
      <th>lugar_nacimiento_Pais limitrofe</th>
      <th>lugar_nacimiento_Pais no limitrofe</th>
      <th>lugar_nacimiento_Partido GBA</th>
      <th>sexo_Mujer</th>
      <th>sexo_Varon</th>
      <th>dominio_Resto de la Ciudad</th>
      <th>dominio_Villas de emergencia</th>
      <th>pred</th>
      <th>Target</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>6879</th>
      <td>9</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>90000</td>
      <td>30000</td>
      <td>3.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>5580</th>
      <td>16</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>68000</td>
      <td>11333</td>
      <td>9.0</td>
      <td>0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>7204</th>
      <td>51</td>
      <td>150000</td>
      <td>0</td>
      <td>150000</td>
      <td>396000</td>
      <td>132000</td>
      <td>19.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>6982</th>
      <td>48</td>
      <td>10000</td>
      <td>4000</td>
      <td>14000</td>
      <td>14000</td>
      <td>3500</td>
      <td>12.0</td>
      <td>3</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>6636</th>
      <td>49</td>
      <td>50000</td>
      <td>0</td>
      <td>50000</td>
      <td>72600</td>
      <td>24200</td>
      <td>12.0</td>
      <td>1</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>2</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 44 columns</p>
</div>
</div>
</div>
</section>
<section id="acuracy" class="level3" data-number="5.4.2">
<h3 data-number="5.4.2" class="anchored" data-anchor-id="acuracy"><span class="header-section-number">5.4.2</span> Acuracy</h3>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:15,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828717591,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="f1195095-ad1e-46fe-e7cf-68744bf6467e" data-execution_count="513">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> confusion_matrix</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> accuracy_score</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="co">#accuracy</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="co">#No corre porque falta sacar el "no corresponde"</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Accuracy score for test data is:'</span>, accuracy_score(y_test,y_pred_test))</span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>confusion_matrix <span class="op">=</span> pd.DataFrame(confusion_matrix(y_test, y_pred_test))</span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>confusion_matrix.index <span class="op">=</span> [<span class="st">'Inicial'</span>,<span class="st">'Primario'</span>, <span class="st">'Secundario'</span>, <span class="st">'Superior'</span>]</span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>confusion_matrix.columns <span class="op">=</span> [<span class="st">'Predicc. Inicial'</span>,<span class="st">'Predicc. Primario'</span>, <span class="st">'Predicc. Secundario'</span>, <span class="st">'Predicc. Superior'</span>]</span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>confusion_matrix</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Accuracy score for test data is: 0.9142741609381319</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="513">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Predicc. Inicial</th>
      <th>Predicc. Primario</th>
      <th>Predicc. Secundario</th>
      <th>Predicc. Superior</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Inicial</th>
      <td>367</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Primario</th>
      <td>0</td>
      <td>411</td>
      <td>17</td>
      <td>38</td>
    </tr>
    <tr>
      <th>Secundario</th>
      <td>0</td>
      <td>13</td>
      <td>1106</td>
      <td>7</td>
    </tr>
    <tr>
      <th>Superior</th>
      <td>0</td>
      <td>82</td>
      <td>54</td>
      <td>377</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Hacemos una evaluación con el classification report</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:409,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828717991,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="a13b8b41-d052-4b63-e54e-b1b131432307" data-execution_count="514">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> classification_report, f1_score</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(y_test, y_pred_test))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>              precision    recall  f1-score   support

           1       1.00      1.00      1.00       368
           2       0.81      0.88      0.85       466
           3       0.94      0.98      0.96      1126
           4       0.89      0.73      0.81       513

    accuracy                           0.91      2473
   macro avg       0.91      0.90      0.90      2473
weighted avg       0.91      0.91      0.91      2473
</code></pre>
</div>
</div>
<p>En general las métricas dan muy bien. Queda por analizar si las variables están siendo bien elegidas.</p>
</section>
<section id="gráficos" class="level3" data-number="5.4.3">
<h3 data-number="5.4.3" class="anchored" data-anchor-id="gráficos"><span class="header-section-number">5.4.3</span> Gráficos</h3>
</section>
<section id="confusion-matrix" class="level3" data-number="5.4.4">
<h3 data-number="5.4.4" class="anchored" data-anchor-id="confusion-matrix"><span class="header-section-number">5.4.4</span> Confusion matrix</h3>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:4,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828717991,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="515">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>X_test<span class="op">=</span>X_test.drop([<span class="st">'pred'</span>, <span class="st">'Target'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:1790,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828719777,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="d14fd173-b6a8-4d20-b2d7-0422e74e3f50" data-execution_count="516">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co">#graficar la matrix</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> yellowbrick.classifier <span class="im">import</span> ConfusionMatrix</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">9</span>,<span class="dv">9</span>))</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>cm <span class="op">=</span> ConfusionMatrix(model_max_depth, cmap<span class="op">=</span><span class="st">'RdPu'</span>)</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>cm.score(X_test, y_test)</span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> label <span class="kw">in</span> cm.ax.texts:</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>    label.set_size(<span class="dv">19</span>)</span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>cm.poof()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\JMC\AppData\Local\Programs\Python\Python310\lib\site-packages\yellowbrick\classifier\base.py:232: YellowbrickWarning: could not determine class_counts_ from previously fitted classifier
  warnings.warn(</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-64-output-2.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display" data-execution_count="516">
<pre><code>&lt;AxesSubplot:title={'center':'DecisionTreeClassifier Confusion Matrix'}, xlabel='Predicted Class', ylabel='True Class'&gt;</code></pre>
</div>
</div>
</section>
<section id="visualización-del-arbol" class="level3" data-number="5.4.5">
<h3 data-number="5.4.5" class="anchored" data-anchor-id="visualización-del-arbol"><span class="header-section-number">5.4.5</span> Visualización del arbol</h3>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:10262,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828730035,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="517">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pydotplus <span class="co">#pip install pydotplus</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.tree <span class="im">import</span> export_graphviz</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> tree_graph_to_png(tree, feature_names, class_names, png_file_to_save):</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>    tree_str <span class="op">=</span> export_graphviz(</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>        tree,</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>        out_file<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>        feature_names<span class="op">=</span>feature_names,</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>        class_names<span class="op">=</span>class_names,</span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>        rounded<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>    graph <span class="op">=</span> pydotplus.graph_from_dot_data(tree_str)  </span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a>    graph.write_png(png_file_to_save)</span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a><span class="co">#lista de variables</span></span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>list_features <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> df_all_train.columns <span class="cf">if</span> x <span class="op">!=</span> <span class="st">'Target'</span>]</span>
<span id="cb87-17"><a href="#cb87-17" aria-hidden="true" tabindex="-1"></a>tree_graph_to_png(model_max_depth, list_features, df_all_train.Target.unique().astype(<span class="bu">str</span>), <span class="st">'model.png'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:732,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828730755,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="dd60d96c-0182-4d2c-b2a6-cc93a74d45b2" data-execution_count="518">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> graphviz</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.tree <span class="im">import</span> DecisionTreeClassifier, export_graphviz</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">20</span>,<span class="dv">10</span>))</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>list_features <span class="op">=</span> [x <span class="cf">for</span> x <span class="kw">in</span> df_all_train.columns <span class="cf">if</span> x <span class="op">!=</span> <span class="st">'Target'</span>]</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> export_graphviz(model_max_depth,out_file<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>                       feature_names<span class="op">=</span>list_features,</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>                       class_names<span class="op">=</span>df_all_train.Target.unique().astype(<span class="bu">str</span>),   </span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>                         filled<span class="op">=</span><span class="va">True</span>, rounded<span class="op">=</span><span class="va">True</span>,  </span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>                         special_characters<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>graph <span class="op">=</span> graphviz.Source(data)</span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="518">
<p><img src="Segunda%20entrega%20proyecto%20final_files/figure-html/cell-66-output-1.svg" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 1440x720 with 0 Axes&gt;</code></pre>
</div>
</div>
</section>
</section>
<section id="random-forest" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="random-forest"><span class="header-section-number">5.5</span> Random Forest</h2>
<section id="comienzo-de-entrenamiento" class="level3" data-number="5.5.1">
<h3 data-number="5.5.1" class="anchored" data-anchor-id="comienzo-de-entrenamiento"><span class="header-section-number">5.5.1</span> Comienzo de entrenamiento</h3>
<p>Vamos a trasnfomrar los datos a que sean numericos pero como ejemplo les voy a dejar que tambien hagamos una transformacion de los numeros</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:8,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828730755,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="519">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co">#transformacion numerica</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> MinMaxScaler</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>numeric_encoder <span class="op">=</span> MinMaxScaler()</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>numeric_encoder.fit(X_train)</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>x_minmax <span class="op">=</span> numeric_encoder.transform(X_train)</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a><span class="co"># x_minmax = numeric_encoder.fit_transform(X_train)</span></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>x_minmax <span class="op">=</span> pd.DataFrame(x_minmax)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:8,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828730756,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="adbeb103-0e79-4d3f-f201-ad9386904b6b" data-execution_count="520">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestRegressor</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.tree <span class="im">import</span> DecisionTreeClassifier</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_absolute_error, mean_absolute_percentage_error, r2_score</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> MinMaxScaler</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a><span class="co"># crear el clasificador</span></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a><span class="co">#classifier = RandomForestRegressor(n_estimators=100)</span></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>classifier <span class="op">=</span> DecisionTreeClassifier(max_depth<span class="op">=</span><span class="dv">5</span>, criterion<span class="op">=</span><span class="st">'gini'</span>, random_state<span class="op">=</span><span class="dv">123</span>)</span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Entrenar el modelo usando el conjunto de entranamiento</span></span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a>classifier.fit(x_minmax, y_train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="520">
<style>#sk-container-id-17 {color: black;background-color: white;}#sk-container-id-17 pre{padding: 0;}#sk-container-id-17 div.sk-toggleable {background-color: white;}#sk-container-id-17 label.sk-toggleable__label {cursor: pointer;display: block;width: 100%;margin-bottom: 0;padding: 0.3em;box-sizing: border-box;text-align: center;}#sk-container-id-17 label.sk-toggleable__label-arrow:before {content: "▸";float: left;margin-right: 0.25em;color: #696969;}#sk-container-id-17 label.sk-toggleable__label-arrow:hover:before {color: black;}#sk-container-id-17 div.sk-estimator:hover label.sk-toggleable__label-arrow:before {color: black;}#sk-container-id-17 div.sk-toggleable__content {max-height: 0;max-width: 0;overflow: hidden;text-align: left;background-color: #f0f8ff;}#sk-container-id-17 div.sk-toggleable__content pre {margin: 0.2em;color: black;border-radius: 0.25em;background-color: #f0f8ff;}#sk-container-id-17 input.sk-toggleable__control:checked~div.sk-toggleable__content {max-height: 200px;max-width: 100%;overflow: auto;}#sk-container-id-17 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {content: "▾";}#sk-container-id-17 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-17 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-17 input.sk-hidden--visually {border: 0;clip: rect(1px 1px 1px 1px);clip: rect(1px, 1px, 1px, 1px);height: 1px;margin: -1px;overflow: hidden;padding: 0;position: absolute;width: 1px;}#sk-container-id-17 div.sk-estimator {font-family: monospace;background-color: #f0f8ff;border: 1px dotted black;border-radius: 0.25em;box-sizing: border-box;margin-bottom: 0.5em;}#sk-container-id-17 div.sk-estimator:hover {background-color: #d4ebff;}#sk-container-id-17 div.sk-parallel-item::after {content: "";width: 100%;border-bottom: 1px solid gray;flex-grow: 1;}#sk-container-id-17 div.sk-label:hover label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-17 div.sk-serial::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: 0;}#sk-container-id-17 div.sk-serial {display: flex;flex-direction: column;align-items: center;background-color: white;padding-right: 0.2em;padding-left: 0.2em;position: relative;}#sk-container-id-17 div.sk-item {position: relative;z-index: 1;}#sk-container-id-17 div.sk-parallel {display: flex;align-items: stretch;justify-content: center;background-color: white;position: relative;}#sk-container-id-17 div.sk-item::before, #sk-container-id-17 div.sk-parallel-item::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: -1;}#sk-container-id-17 div.sk-parallel-item {display: flex;flex-direction: column;z-index: 1;position: relative;background-color: white;}#sk-container-id-17 div.sk-parallel-item:first-child::after {align-self: flex-end;width: 50%;}#sk-container-id-17 div.sk-parallel-item:last-child::after {align-self: flex-start;width: 50%;}#sk-container-id-17 div.sk-parallel-item:only-child::after {width: 0;}#sk-container-id-17 div.sk-dashed-wrapped {border: 1px dashed gray;margin: 0 0.4em 0.5em 0.4em;box-sizing: border-box;padding-bottom: 0.4em;background-color: white;}#sk-container-id-17 div.sk-label label {font-family: monospace;font-weight: bold;display: inline-block;line-height: 1.2em;}#sk-container-id-17 div.sk-label-container {text-align: center;}#sk-container-id-17 div.sk-container {/* jupyter's `normalize.less` sets `[hidden] { display: none; }` but bootstrap.min.css set `[hidden] { display: none !important; }` so we also need the `!important` here to be able to override the default hidden behavior on the sphinx rendered scikit-learn.org. See: https://github.com/scikit-learn/scikit-learn/issues/21755 */display: inline-block !important;position: relative;}#sk-container-id-17 div.sk-text-repr-fallback {display: none;}</style><div id="sk-container-id-17" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>DecisionTreeClassifier(max_depth=5, random_state=123)</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br>On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden=""><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-17" type="checkbox" checked=""><label for="sk-estimator-id-17" class="sk-toggleable__label sk-toggleable__label-arrow">DecisionTreeClassifier</label><div class="sk-toggleable__content"><pre>DecisionTreeClassifier(max_depth=5, random_state=123)</pre></div></div></div></div></div>
</div>
</div>
</section>
</section>
<section id="prediccion" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="prediccion"><span class="header-section-number">5.6</span> Prediccion</h2>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:5,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828730756,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="521">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co">#trasnform test dataset con las trasnfomracion del entrenamiento</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>x_test_encoder <span class="op">=</span> numeric_encoder.transform(X_test)</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> classifier.predict(x_test_encoder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:490,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828731241,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="56a783e6-2add-482a-e406-a46d547b2cd7" data-execution_count="522">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>X_test[<span class="st">'pred'</span>] <span class="op">=</span> y_pred</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>X_test[<span class="st">'Target'</span>] <span class="op">=</span> y_test</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>X_test.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="522">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>edad</th>
      <th>ingreso_total_lab</th>
      <th>ingreso_total_no_lab</th>
      <th>ingresos_totales</th>
      <th>ingresos_familiares</th>
      <th>ing_per_cap_familiar</th>
      <th>años_escolaridad</th>
      <th>cant_hijos_nac_vivos</th>
      <th>region_centro</th>
      <th>region_norte</th>
      <th>...</th>
      <th>lugar_nacimiento_PBA sin especificar</th>
      <th>lugar_nacimiento_Pais limitrofe</th>
      <th>lugar_nacimiento_Pais no limitrofe</th>
      <th>lugar_nacimiento_Partido GBA</th>
      <th>sexo_Mujer</th>
      <th>sexo_Varon</th>
      <th>dominio_Resto de la Ciudad</th>
      <th>dominio_Villas de emergencia</th>
      <th>pred</th>
      <th>Target</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>6879</th>
      <td>9</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>90000</td>
      <td>30000</td>
      <td>3.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>5580</th>
      <td>16</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>68000</td>
      <td>11333</td>
      <td>9.0</td>
      <td>0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>7204</th>
      <td>51</td>
      <td>150000</td>
      <td>0</td>
      <td>150000</td>
      <td>396000</td>
      <td>132000</td>
      <td>19.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>6982</th>
      <td>48</td>
      <td>10000</td>
      <td>4000</td>
      <td>14000</td>
      <td>14000</td>
      <td>3500</td>
      <td>12.0</td>
      <td>3</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>6636</th>
      <td>49</td>
      <td>50000</td>
      <td>0</td>
      <td>50000</td>
      <td>72600</td>
      <td>24200</td>
      <td>12.0</td>
      <td>1</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>2</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 44 columns</p>
</div>
</div>
</div>
</section>
<section id="metricas" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="metricas"><span class="header-section-number">5.7</span> Metricas</h2>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:20,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828731242,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="5ac77c18-c50a-4f42-a383-4626afe31d15" data-execution_count="523">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> confusion_matrix</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> accuracy_score</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="co">#accuracy</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Accuracy score for test data is:'</span>, accuracy_score(y_test,y_pred))</span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>confusion_matrix <span class="op">=</span> pd.DataFrame(confusion_matrix(y_test, y_pred))</span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>confusion_matrix.index <span class="op">=</span> [<span class="st">'Inicial'</span>,<span class="st">'Primario'</span>, <span class="st">'Secundario'</span>, <span class="st">'Superior'</span>]</span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>confusion_matrix.columns <span class="op">=</span> [<span class="st">'Predicc. Inicial'</span>,<span class="st">'Predicc. Primario'</span>, <span class="st">'Predicc. Secundario'</span>, <span class="st">'Predicc. Superior'</span>]</span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>confusion_matrix</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Accuracy score for test data is: 0.8916295996765062</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="523">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Predicc. Inicial</th>
      <th>Predicc. Primario</th>
      <th>Predicc. Secundario</th>
      <th>Predicc. Superior</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Inicial</th>
      <td>367</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Primario</th>
      <td>0</td>
      <td>413</td>
      <td>4</td>
      <td>49</td>
    </tr>
    <tr>
      <th>Secundario</th>
      <td>0</td>
      <td>13</td>
      <td>1113</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Superior</th>
      <td>0</td>
      <td>61</td>
      <td>140</td>
      <td>312</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Se evalúa la capacidad predictiva del árbol inicial calculando el accuracy en el conjunto de test. El modelo inicial es capaz de predecir correctamente un 89 % de las observaciones del conjunto de test.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:15,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828731242,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="82be6285-8f46-40e2-a206-2945ac2c7caa" data-execution_count="524">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> classification_report, f1_score</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(y_test, y_pred))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>              precision    recall  f1-score   support

           1       1.00      1.00      1.00       368
           2       0.85      0.89      0.87       466
           3       0.88      0.99      0.93      1126
           4       0.86      0.61      0.71       513

    accuracy                           0.89      2473
   macro avg       0.90      0.87      0.88      2473
weighted avg       0.89      0.89      0.89      2473
</code></pre>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:12,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828731242,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="1a4cce8d-ea6e-4b01-c917-f940c95e0979" data-execution_count="525">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar características importantes</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Importancia de los predictores en el modelo"</span>)</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"-------------------------------------------"</span>)</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>feature_importances_df <span class="op">=</span> pd.DataFrame(</span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>    {<span class="st">"feature"</span>: <span class="bu">list</span>(X_train.columns), <span class="st">"importance"</span>: classifier.feature_importances_}</span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>).sort_values(<span class="st">"importance"</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar</span></span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a>feature_importances_df[feature_importances_df[<span class="st">'importance'</span>]<span class="op">&gt;</span><span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Importancia de los predictores en el modelo
-------------------------------------------</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="525">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>feature</th>
      <th>importance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>6</th>
      <td>años_escolaridad</td>
      <td>0.927386</td>
    </tr>
    <tr>
      <th>0</th>
      <td>edad</td>
      <td>0.072614</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Evaluando la importancia de cada predictor podemos ver que existe una variable que tiene un impacto del 92% sobre la predicción “años_escolaridad” y en segundo lugar otra variable que tiene el 7,3%. A fin de obtener un modelo robusto, definimos eliminar dichas variables y volver a correr el modelo predictivo.</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:11,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828731243,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="526">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>X_train_predictores <span class="op">=</span> X_train.drop([<span class="st">'años_escolaridad'</span>, <span class="st">'edad'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>X_test_predictores <span class="op">=</span> X_test.drop([<span class="st">'años_escolaridad'</span>, <span class="st">'edad'</span>, <span class="st">'pred'</span>, <span class="st">'Target'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Entrenamiendo y prediccion</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:11,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828731243,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="527">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co">#transformacion numerica</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> MinMaxScaler</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>numeric_encoder <span class="op">=</span> MinMaxScaler()</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>numeric_encoder.fit(X_train_predictores)</span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>x_minmax_predictores <span class="op">=</span> numeric_encoder.transform(X_train_predictores)</span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>x_minmax_predictores <span class="op">=</span> pd.DataFrame(x_minmax_predictores)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:12,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828731244,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="6f383653-a694-4bcf-96cf-4a0b8a016e18" data-execution_count="528">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestRegressor</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.tree <span class="im">import</span> DecisionTreeClassifier</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_absolute_error, mean_absolute_percentage_error, r2_score</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> MinMaxScaler</span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a><span class="co"># crear el clasificador</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a><span class="co">#classifier = RandomForestRegressor(n_estimators=100)</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>classifier <span class="op">=</span> DecisionTreeClassifier(max_depth<span class="op">=</span><span class="dv">5</span>, criterion<span class="op">=</span><span class="st">'gini'</span>, random_state<span class="op">=</span><span class="dv">123</span>)</span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Entrenar el modelo usando el conjunto de entranamiento</span></span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a>classifier.fit(x_minmax_predictores, y_train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="528">
<style>#sk-container-id-18 {color: black;background-color: white;}#sk-container-id-18 pre{padding: 0;}#sk-container-id-18 div.sk-toggleable {background-color: white;}#sk-container-id-18 label.sk-toggleable__label {cursor: pointer;display: block;width: 100%;margin-bottom: 0;padding: 0.3em;box-sizing: border-box;text-align: center;}#sk-container-id-18 label.sk-toggleable__label-arrow:before {content: "▸";float: left;margin-right: 0.25em;color: #696969;}#sk-container-id-18 label.sk-toggleable__label-arrow:hover:before {color: black;}#sk-container-id-18 div.sk-estimator:hover label.sk-toggleable__label-arrow:before {color: black;}#sk-container-id-18 div.sk-toggleable__content {max-height: 0;max-width: 0;overflow: hidden;text-align: left;background-color: #f0f8ff;}#sk-container-id-18 div.sk-toggleable__content pre {margin: 0.2em;color: black;border-radius: 0.25em;background-color: #f0f8ff;}#sk-container-id-18 input.sk-toggleable__control:checked~div.sk-toggleable__content {max-height: 200px;max-width: 100%;overflow: auto;}#sk-container-id-18 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {content: "▾";}#sk-container-id-18 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-18 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-18 input.sk-hidden--visually {border: 0;clip: rect(1px 1px 1px 1px);clip: rect(1px, 1px, 1px, 1px);height: 1px;margin: -1px;overflow: hidden;padding: 0;position: absolute;width: 1px;}#sk-container-id-18 div.sk-estimator {font-family: monospace;background-color: #f0f8ff;border: 1px dotted black;border-radius: 0.25em;box-sizing: border-box;margin-bottom: 0.5em;}#sk-container-id-18 div.sk-estimator:hover {background-color: #d4ebff;}#sk-container-id-18 div.sk-parallel-item::after {content: "";width: 100%;border-bottom: 1px solid gray;flex-grow: 1;}#sk-container-id-18 div.sk-label:hover label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-18 div.sk-serial::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: 0;}#sk-container-id-18 div.sk-serial {display: flex;flex-direction: column;align-items: center;background-color: white;padding-right: 0.2em;padding-left: 0.2em;position: relative;}#sk-container-id-18 div.sk-item {position: relative;z-index: 1;}#sk-container-id-18 div.sk-parallel {display: flex;align-items: stretch;justify-content: center;background-color: white;position: relative;}#sk-container-id-18 div.sk-item::before, #sk-container-id-18 div.sk-parallel-item::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: -1;}#sk-container-id-18 div.sk-parallel-item {display: flex;flex-direction: column;z-index: 1;position: relative;background-color: white;}#sk-container-id-18 div.sk-parallel-item:first-child::after {align-self: flex-end;width: 50%;}#sk-container-id-18 div.sk-parallel-item:last-child::after {align-self: flex-start;width: 50%;}#sk-container-id-18 div.sk-parallel-item:only-child::after {width: 0;}#sk-container-id-18 div.sk-dashed-wrapped {border: 1px dashed gray;margin: 0 0.4em 0.5em 0.4em;box-sizing: border-box;padding-bottom: 0.4em;background-color: white;}#sk-container-id-18 div.sk-label label {font-family: monospace;font-weight: bold;display: inline-block;line-height: 1.2em;}#sk-container-id-18 div.sk-label-container {text-align: center;}#sk-container-id-18 div.sk-container {/* jupyter's `normalize.less` sets `[hidden] { display: none; }` but bootstrap.min.css set `[hidden] { display: none !important; }` so we also need the `!important` here to be able to override the default hidden behavior on the sphinx rendered scikit-learn.org. See: https://github.com/scikit-learn/scikit-learn/issues/21755 */display: inline-block !important;position: relative;}#sk-container-id-18 div.sk-text-repr-fallback {display: none;}</style><div id="sk-container-id-18" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>DecisionTreeClassifier(max_depth=5, random_state=123)</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br>On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden=""><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-18" type="checkbox" checked=""><label for="sk-estimator-id-18" class="sk-toggleable__label sk-toggleable__label-arrow">DecisionTreeClassifier</label><div class="sk-toggleable__content"><pre>DecisionTreeClassifier(max_depth=5, random_state=123)</pre></div></div></div></div></div>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:477,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828731711,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="b837a4fb-cf35-49bc-e70d-3aa128c7e9a4" data-execution_count="529">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>X_test_predictores.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 2473 entries, 6879 to 5518
Data columns (total 40 columns):
 #   Column                                  Non-Null Count  Dtype  
---  ------                                  --------------  -----  
 0   ingreso_total_lab                       2473 non-null   int64  
 1   ingreso_total_no_lab                    2473 non-null   int64  
 2   ingresos_totales                        2473 non-null   int64  
 3   ingresos_familiares                     2473 non-null   int64  
 4   ing_per_cap_familiar                    2473 non-null   int64  
 5   cant_hijos_nac_vivos                    2473 non-null   int64  
 6   region_centro                           2473 non-null   float64
 7   region_norte                            2473 non-null   float64
 8   region_oeste                            2473 non-null   float64
 9   region_sur                              2473 non-null   float64
 10  situacion_conyugal_Casado/a             2473 non-null   float64
 11  situacion_conyugal_Divorciado/a         2473 non-null   float64
 12  situacion_conyugal_No corresponde       2473 non-null   float64
 13  situacion_conyugal_separado             2473 non-null   float64
 14  situacion_conyugal_Soltero/a            2473 non-null   float64
 15  situacion_conyugal_Unido/a              2473 non-null   float64
 16  situacion_conyugal_Viudo/a              2473 non-null   float64
 17  sector_educativo_Estatal/publico        2473 non-null   float64
 18  sector_educativo_No corresponde         2473 non-null   float64
 19  sector_educativo_Privado no religioso   2473 non-null   float64
 20  sector_educativo_Privado religioso      2473 non-null   float64
 21  estado_ocupacional_Desocupado           2473 non-null   float64
 22  estado_ocupacional_Inactivo             2473 non-null   float64
 23  estado_ocupacional_Ocupado              2473 non-null   float64
 24  afiliacion_salud_Otros                  2473 non-null   float64
 25  afiliacion_salud_solo_o_social          2473 non-null   float64
 26  afiliacion_salud_solo_prepaga           2473 non-null   float64
 27  afiliacion_salud_solo_prepaga_o_mutual  2473 non-null   float64
 28  afiliacion_salud_Solo sistema publico   2473 non-null   float64
 29  lugar_nacimiento_CABA                   2473 non-null   float64
 30  lugar_nacimiento_Otra provincia         2473 non-null   float64
 31  lugar_nacimiento_PBA excepto GBA        2473 non-null   float64
 32  lugar_nacimiento_PBA sin especificar    2473 non-null   float64
 33  lugar_nacimiento_Pais limitrofe         2473 non-null   float64
 34  lugar_nacimiento_Pais no limitrofe      2473 non-null   float64
 35  lugar_nacimiento_Partido GBA            2473 non-null   float64
 36  sexo_Mujer                              2473 non-null   float64
 37  sexo_Varon                              2473 non-null   float64
 38  dominio_Resto de la Ciudad              2473 non-null   float64
 39  dominio_Villas de emergencia            2473 non-null   float64
dtypes: float64(34), int64(6)
memory usage: 792.1 KB</code></pre>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:14,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828731711,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-execution_count="530">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co">#trasnform test dataset con las trasnfomracion del entrenamiento</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>x_test_encoder_predictores <span class="op">=</span> numeric_encoder.transform(X_test_predictores)</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>y_pred_predictores <span class="op">=</span> classifier.predict(x_test_encoder_predictores)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:13,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828731712,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="e1350d65-c800-4129-fd27-6006c7fb1dc3" data-execution_count="531">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>X_test_predictores[<span class="st">'pred'</span>] <span class="op">=</span> y_pred_predictores</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>X_test_predictores[<span class="st">'target'</span>] <span class="op">=</span> y_test</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>X_test_predictores.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="531">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>ingreso_total_lab</th>
      <th>ingreso_total_no_lab</th>
      <th>ingresos_totales</th>
      <th>ingresos_familiares</th>
      <th>ing_per_cap_familiar</th>
      <th>cant_hijos_nac_vivos</th>
      <th>region_centro</th>
      <th>region_norte</th>
      <th>region_oeste</th>
      <th>region_sur</th>
      <th>...</th>
      <th>lugar_nacimiento_PBA sin especificar</th>
      <th>lugar_nacimiento_Pais limitrofe</th>
      <th>lugar_nacimiento_Pais no limitrofe</th>
      <th>lugar_nacimiento_Partido GBA</th>
      <th>sexo_Mujer</th>
      <th>sexo_Varon</th>
      <th>dominio_Resto de la Ciudad</th>
      <th>dominio_Villas de emergencia</th>
      <th>pred</th>
      <th>target</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>6879</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>90000</td>
      <td>30000</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>5580</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>68000</td>
      <td>11333</td>
      <td>0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1</td>
      <td>3</td>
    </tr>
    <tr>
      <th>7204</th>
      <td>150000</td>
      <td>0</td>
      <td>150000</td>
      <td>396000</td>
      <td>132000</td>
      <td>0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>6982</th>
      <td>10000</td>
      <td>4000</td>
      <td>14000</td>
      <td>14000</td>
      <td>3500</td>
      <td>3</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>6636</th>
      <td>50000</td>
      <td>0</td>
      <td>50000</td>
      <td>72600</td>
      <td>24200</td>
      <td>1</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>3</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 42 columns</p>
</div>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:12,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828731712,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="f0764bc6-0cc9-4f03-80bf-c5cf6ee50749" data-execution_count="536">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar características importantes</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Importancia de los predictores en el modelo"</span>)</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"-------------------------------------------"</span>)</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>feature_importances_df <span class="op">=</span> pd.DataFrame(</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>    {<span class="st">"feature"</span>: <span class="bu">list</span>(X_train_predictores.columns), <span class="st">"importance"</span>: classifier.feature_importances_}</span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>).sort_values(<span class="st">"importance"</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar</span></span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a>feature_importances_df[feature_importances_df[<span class="st">'importance'</span>]<span class="op">&gt;</span><span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Importancia de los predictores en el modelo
-------------------------------------------</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="536">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>feature</th>
      <th>importance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>ingresos_totales</td>
      <td>0.481638</td>
    </tr>
    <tr>
      <th>0</th>
      <td>ingreso_total_lab</td>
      <td>0.169920</td>
    </tr>
    <tr>
      <th>5</th>
      <td>cant_hijos_nac_vivos</td>
      <td>0.163388</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ing_per_cap_familiar</td>
      <td>0.094213</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ingresos_familiares</td>
      <td>0.051217</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ingreso_total_no_lab</td>
      <td>0.028654</td>
    </tr>
    <tr>
      <th>7</th>
      <td>region_norte</td>
      <td>0.003848</td>
    </tr>
    <tr>
      <th>24</th>
      <td>afiliacion_salud_Otros</td>
      <td>0.002516</td>
    </tr>
    <tr>
      <th>10</th>
      <td>situacion_conyugal_Casado/a</td>
      <td>0.002352</td>
    </tr>
    <tr>
      <th>35</th>
      <td>lugar_nacimiento_Partido GBA</td>
      <td>0.002255</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>#Metricas</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:381,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828732086,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="95c9a66c-2d05-4f89-e1c8-26087d2b198f" data-execution_count="533">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> confusion_matrix</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> accuracy_score</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="co">#accuracy</span></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Accuracy score for test data is:'</span>, accuracy_score(y_test,y_pred_predictores))</span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>confusion_matrix <span class="op">=</span> pd.DataFrame(confusion_matrix(y_test, y_pred_predictores))</span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a>confusion_matrix.index <span class="op">=</span> [<span class="st">'Inicial'</span>,<span class="st">'Primario'</span>, <span class="st">'Secundario'</span>, <span class="st">'Superior'</span>]</span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a>confusion_matrix.columns <span class="op">=</span> [<span class="st">'Predicc. Inicial'</span>,<span class="st">'Predicc. Primario'</span>, <span class="st">'Predicc. Secundario'</span>, <span class="st">'Predicc. Superior'</span>]</span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a>confusion_matrix</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Accuracy score for test data is: 0.5143550343712091</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="533">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Predicc. Inicial</th>
      <th>Predicc. Primario</th>
      <th>Predicc. Secundario</th>
      <th>Predicc. Superior</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Inicial</th>
      <td>300</td>
      <td>25</td>
      <td>43</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Primario</th>
      <td>27</td>
      <td>199</td>
      <td>235</td>
      <td>5</td>
    </tr>
    <tr>
      <th>Secundario</th>
      <td>206</td>
      <td>161</td>
      <td>749</td>
      <td>10</td>
    </tr>
    <tr>
      <th>Superior</th>
      <td>77</td>
      <td>56</td>
      <td>356</td>
      <td>24</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:6,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1660828732086,&quot;user&quot;:{&quot;displayName&quot;:&quot;lucia buzzeo&quot;,&quot;userId&quot;:&quot;12703039789875955059&quot;},&quot;user_tz&quot;:180}" data-outputid="ec72a5a1-d6f1-4152-ed8c-84291a2ec723" data-execution_count="534">
<details>
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> classification_report, f1_score</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(y_test, y_pred_predictores))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>              precision    recall  f1-score   support

           1       0.49      0.82      0.61       368
           2       0.45      0.43      0.44       466
           3       0.54      0.67      0.60      1126
           4       0.62      0.05      0.09       513

    accuracy                           0.51      2473
   macro avg       0.53      0.49      0.43      2473
weighted avg       0.53      0.51      0.46      2473
</code></pre>
</div>
</div>
<p>Al eliminar los Features “Años_escolaridad” y “Edad” conseguimos un modelo robusto. Sin embargo, La Presición del método ha disminuido a 51%</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



<script src="Segunda entrega proyecto final_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>